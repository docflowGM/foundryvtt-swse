/* ============================================
   FOUNDRY UI PROTECTION - IMPROVED VERSION
   Ensures SWSE themes NEVER affect Foundry's core UI
   
   CRITICAL: This file MUST be loaded LAST in system.json
   ============================================ */

/* Protect all Foundry UI layers - most important fix */
#ui-top,
#ui-left, 
#ui-right,
#ui-bottom,
#sidebar,
#sidebar *,
#controls,
#controls *,
#hotbar,
#hotbar *,
#players,
#players *,
#pause,
#pause *,
#navigation,
#navigation *,
#context-menu,
#context-menu * {
    all: revert !important;
}

/* Additional sidebar protection - critical for the "smooshed sidebar" issue */
#sidebar {
    position: fixed !important;
    top: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 300px !important;
    height: 100vh !important;
    z-index: 100 !important;
    transform: none !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Ensure non-SWSE windows use Foundry defaults */
.window-app:not(.swse),
.window-app:not(.swse) *,
.app:not(.swse),
.app:not(.swse) * {
    all: revert !important;
}

/* Protect specific Foundry window elements even in SWSE windows */
.swse.sheet .window-resizable-handle,
.swse.sheet .close,
.swse.sheet .header-button,
.swse.sheet .window-control {
    all: revert !important;
}

/* SWSE Theme Containment */
.swse.sheet,
.swse.window-app {
    position: relative !important;
    contain: layout style !important;
}

/* Ensure proper z-index layering */
#sidebar {
    z-index: 100 !important;
}

.swse.sheet,
.swse.window-app {
    z-index: 95 !important;
}

/* Sheet content wrapper protection */
.swse.sheet .sheet-body {
    position: relative !important;
    contain: layout style !important;
}

/* Canvas protection */
#board,
#board *,
canvas {
    all: revert !important;
}
