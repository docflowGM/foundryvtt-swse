/* ============================================
   FOUNDRY UI PROTECTION FROM THEME BLEED
   Ensures themes only affect SWSE sheets
   ============================================ */

/* Protect Foundry's core UI elements from theme styles */
/* NOTE: We do NOT apply 'all: revert' to #sidebar because it breaks the sidebar completely
   Instead, we protect it with more specific rules below */
#controls,
#controls *,
#hotbar,
#hotbar *,
#players,
#players *,
#pause,
#pause *,
#ui-left,
#ui-right,
#ui-top,
#ui-bottom {
    /* Reset any theme styles that might affect these */
    all: revert !important;
}

/* Specifically protect sidebar functionality */
#sidebar .sidebar-tab {
    height: auto !important;
    max-height: none !important;
    overflow-y: auto !important;
}

/* Ensure themes only apply to SWSE sheets */
.window-app:not(.swse),
.app:not(.swse),
.application:not(.swse) {
    /* Don't let themes affect non-SWSE windows */
    background: revert !important;
    border: revert !important;
    color: revert !important;
}

/* Fix z-index layering */
#sidebar {
    z-index: 200 !important;
    position: relative !important;
}

.swse.sheet,
.swse.window-app {
    z-index: 100 !important;
}

/* Ensure SWSE themes are properly contained */
[class*="-theme"] {
    /* Themes should not affect positioning of other elements */
    position: relative;
    contain: layout style;
}

/* Additional protection for specific problem areas */
body > .window-app:not(.swse) {
    /* Non-SWSE windows should use default Foundry styles */
    all: revert !important;
}
