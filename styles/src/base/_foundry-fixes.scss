// ============================================================================
// FOUNDRY VTT FIXES
// System-agnostic Foundry bug fixes (NOT scoped to .swse)
// These are necessary fixes for Foundry VTT issues
// ============================================================================

// Fix for Foundry v13/The Forge sidebar height bug
// Override broken height restrictions on sidebar tabs
#sidebar {
  // Ensure sidebar itself has proper display and sizing
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  padding-top: 0 !important;
  margin-top: 0 !important;

  .sidebar-tab {
    height: auto !important;
    max-height: none !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    display: none !important; // Hidden by default
    padding-top: 0 !important;
    margin-top: 0 !important;

    // Show active tab
    &.active {
      display: flex !important;
      flex-direction: column !important;
      flex: 1 !important;
      min-height: 0 !important;
    }

    &.directory {
      height: auto !important;
      flex: 1 !important;
      min-height: 0 !important;
    }

    // Specific fixes for chat tab
    &#chat {
      padding-top: 0 !important;

      #chat-log {
        flex: 1 !important;
        min-height: 0 !important;
        overflow-y: auto !important;
        margin-top: 0 !important;
        padding-top: 8px !important;
      }

      #chat-controls {
        flex-shrink: 0 !important;
        margin-bottom: 0 !important;
      }

      #chat-form {
        flex-shrink: 0 !important;
      }
    }
  }

  .directory-list {
    height: auto !important;
    max-height: none !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    flex: 1 !important;
    min-height: 0 !important;
    margin-top: 0 !important;
    padding-top: 8px !important;
  }

  // Fix for directory header
  .directory-header {
    flex-shrink: 0 !important;
    margin-top: 0 !important;
  }

  // Fix for sidebar tabs navigation
  nav.tabs {
    flex-shrink: 0 !important;
    margin-bottom: 0 !important;
  }
}

// Ensure UI containers don't interfere
#ui-left {
  display: flex !important;
  flex-direction: column !important;
  pointer-events: auto !important;
}

// Add any other Foundry-specific fixes here as needed
// Keep this file minimal - only for fixing Foundry bugs
