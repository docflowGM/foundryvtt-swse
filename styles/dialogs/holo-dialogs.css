/* ═══════════════════════════════════════════════════════════════════════════
   SWSE CSS — MUST BE SCOPED TO .app.swse-window
   ═════════════════════════════════════════════════════════════════════════
   CSS LAYER DECLARATION (V13+ FUTURE-PROOFING)

   Establishes layering order:
   1. foundry — Untouched Foundry UI styles (lowest specificity)
   2. swse    — SWSE system customizations (higher specificity)

   Prevents: SWSE styles accidentally overriding critical Foundry rules
   or losing to future Foundry v14+ changes.

   PHASE 5 ENFORCEMENT: No selectors target Foundry core elements
   (#sidebar, #ui-left, #hotbar, etc.)
   ═════════════════════════════════════════════════════════════════════════ */
@layer foundry, swse;

/**
 * SWSE Holo-Themed Dialog Styling
 * Ensures consistent holo theme across all progression and suggestion engine dialogs
 * Applies to: mentor-suggestion, mentor-chat, mentor-reflective, prerequisite-builder, talent-tree-selection
 */

/* ═══════════════════════════════════════════════════════════════════════════
   BASE DIALOG STYLING - Apply to all .swse dialogs with holo theme
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .swse {
  background: linear-gradient(135deg, var(--swse-bg-dark) 0%, var(--swse-bg-mid) 100%);
  color: var(--swse-text-primary);
  border: 1px solid var(--swse-border-default);
}

[data-theme=holo] .swse .window-header {
  background: linear-gradient(90deg, rgba(0, 170, 255, 0.2) 0%, transparent 100%);
  border-bottom: 1px solid var(--swse-border-default);
}

[data-theme=holo] .swse .window-title {
  color: var(--swse-primary);
  text-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
  font-weight: bold;
}

[data-theme=holo] .swse .window-resizer {
  border-left-color: var(--swse-border-default);
  border-top-color: var(--swse-border-default);
}

/* ═══════════════════════════════════════════════════════════════════════════
   FORM ELEMENTS - Input, select, textarea styling
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .swse input,
[data-theme=holo] .swse select,
[data-theme=holo] .swse textarea {
  background: var(--swse-bg-light);
  color: var(--swse-text-primary);
  border: 1px solid var(--swse-border-default);
  border-radius: 4px;
}

[data-theme=holo] .swse input:focus,
[data-theme=holo] .swse select:focus,
[data-theme=holo] .swse textarea:focus {
  outline: none;
  border-color: var(--swse-border-active);
  box-shadow: 0 0 10px rgba(0, 170, 255, 0.4), inset 0 0 5px rgba(0, 170, 255, 0.1);
}

[data-theme=holo] .swse input::placeholder {
  color: var(--swse-text-muted);
}

/* ═══════════════════════════════════════════════════════════════════════════
   BUTTON STYLING - Primary, success, secondary, danger buttons
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .swse button {
  border-radius: 4px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

/* Primary buttons */
[data-theme=holo] .swse button.btn-primary,
[data-theme=holo] .swse .btn.btn-primary {
  background: linear-gradient(135deg, var(--swse-secondary) 0%, var(--swse-accent) 100%);
  color: var(--swse-bg-dark);
  border: 1px solid var(--swse-secondary);
}

[data-theme=holo] .swse button.btn-primary:hover,
[data-theme=holo] .swse .btn.btn-primary:hover {
  box-shadow: var(--swse-shadow-glow-cyan), 0 0 20px rgba(0, 170, 255, 0.3);
}

/* Success buttons */
[data-theme=holo] .swse button.btn-success,
[data-theme=holo] .swse .btn.btn-success {
  background: linear-gradient(135deg, var(--swse-success) 0%, rgba(0, 255, 136, 0.7) 100%);
  color: var(--swse-bg-dark);
  border: 1px solid var(--swse-success);
}

[data-theme=holo] .swse button.btn-success:hover,
[data-theme=holo] .swse .btn.btn-success:hover {
  box-shadow: 0 0 15px rgba(0, 255, 136, 0.6);
}

/* Secondary buttons */
[data-theme=holo] .swse button.btn-secondary,
[data-theme=holo] .swse .btn.btn-secondary {
  background: var(--swse-bg-light);
  color: var(--swse-text-primary);
  border: 1px solid var(--swse-border-default);
}

[data-theme=holo] .swse button.btn-secondary:hover,
[data-theme=holo] .swse .btn.btn-secondary:hover {
  border-color: var(--swse-border-active);
  box-shadow: 0 0 10px rgba(0, 170, 255, 0.3);
}

/* Danger buttons */
[data-theme=holo] .swse button.btn-danger,
[data-theme=holo] .swse .btn.btn-danger {
  background: linear-gradient(135deg, var(--swse-danger) 0%, rgba(255, 107, 107, 0.7) 100%);
  color: white;
  border: 1px solid var(--swse-danger);
}

[data-theme=holo] .swse button.btn-danger:hover,
[data-theme=holo] .swse .btn.btn-danger:hover {
  box-shadow: 0 0 15px rgba(255, 107, 107, 0.6);
}

/* ═══════════════════════════════════════════════════════════════════════════
   DIALOG-SPECIFIC: Mentor Suggestion Dialog
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .mentor-suggestion-dialog {
  background: linear-gradient(135deg, var(--swse-bg-dark) 0%, var(--swse-bg-mid) 100%);
}

[data-theme=holo] .mentor-suggestion-dialog .mentor-intro,
[data-theme=holo] .mentor-suggestion-dialog .mentor-explanation {
  color: var(--swse-text-light);
  line-height: 1.6;
}

/* ═══════════════════════════════════════════════════════════════════════════
   DIALOG-SPECIFIC: Mentor Chat Dialog (KOTOR-style)
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .mentor-chat-dialog {
  background: linear-gradient(135deg, var(--swse-bg-dark) 0%, var(--swse-bg-mid) 100%);
}

[data-theme=holo] .mentor-chat-dialog.kotor-style {
  background: linear-gradient(135deg, var(--swse-bg-dark) 0%, var(--swse-bg-mid) 100%);
}

[data-theme=holo] .kotor-conversation-box {
  background: linear-gradient(135deg, rgba(15, 20, 40, 0.8) 0%, rgba(10, 15, 30, 0.8) 100%);
  border: 1px solid var(--swse-border-default);
  border-radius: 8px;
}

[data-theme=holo] .kotor-mentor-nameplate h2 {
  color: var(--swse-primary);
  text-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
}

[data-theme=holo] .kotor-mentor-nameplate .mentor-title {
  color: var(--swse-text-secondary);
}

[data-theme=holo] .kotor-dialogue-box {
  background: rgba(0, 0, 0, 0.4);
  border: 1px solid var(--swse-border-subtle);
  border-radius: 4px;
  color: var(--swse-text-light);
}

[data-theme=holo] .dialogue-line {
  color: var(--swse-text-light);
}

[data-theme=holo] .kotor-topics-section .topic-button {
  background: var(--swse-bg-light);
  border: 1px solid var(--swse-border-default);
  color: var(--swse-text-primary);
  border-radius: 4px;
  padding: 10px;
  margin: 5px 0;
  transition: all 0.2s ease;
}

[data-theme=holo] .kotor-topics-section .topic-button:hover {
  background: linear-gradient(135deg, rgba(0, 170, 255, 0.2) 0%, rgba(0, 217, 255, 0.1) 100%);
  border-color: var(--swse-border-active);
  box-shadow: 0 0 10px rgba(0, 170, 255, 0.3);
}

[data-theme=holo] .back-to-mentors,
[data-theme=holo] .back-to-topics {
  background: var(--swse-bg-light);
  border: 1px solid var(--swse-border-default);
  color: var(--swse-text-primary);
  padding: 8px 12px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
}

[data-theme=holo] .back-to-mentors:hover,
[data-theme=holo] .back-to-topics:hover {
  border-color: var(--swse-border-active);
  box-shadow: 0 0 8px rgba(0, 170, 255, 0.3);
}

/* ═══════════════════════════════════════════════════════════════════════════
   DIALOG-SPECIFIC: Mentor Reflective Dialog
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .mentor-reflective-dialog {
  background: linear-gradient(135deg, var(--swse-bg-dark) 0%, var(--swse-bg-mid) 100%);
}

[data-theme=holo] .mentor-header {
  border-bottom: 1px solid var(--swse-border-default);
  padding-bottom: 15px;
  margin-bottom: 15px;
}

[data-theme=holo] .mentor-header h2 {
  color: var(--swse-primary);
  text-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
}

[data-theme=holo] .mentor-header .mentor-title {
  color: var(--swse-text-secondary);
}

[data-theme=holo] .topic-display h3 {
  color: var(--swse-primary);
  text-shadow: 0 0 5px rgba(0, 170, 255, 0.3);
}

[data-theme=holo] .topic-display .topic-desc {
  color: var(--swse-text-secondary);
}

[data-theme=holo] .dialogue-content {
  margin: 20px 0;
}

[data-theme=holo] .dialogue-layer {
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--swse-border-subtle);
  border-radius: 4px;
  padding: 15px;
  margin-bottom: 10px;
}

[data-theme=holo] .observation {
  border-left: 3px solid var(--swse-secondary);
}

[data-theme=holo] .suggestion {
  border-left: 3px solid var(--swse-accent);
}

[data-theme=holo] .respect-clause {
  border-left: 3px solid var(--swse-text-secondary);
  font-style: italic;
}

[data-theme=holo] .dialogue-layer p {
  color: var(--swse-text-light);
  margin: 0;
  line-height: 1.6;
}

/* ═══════════════════════════════════════════════════════════════════════════
   DIALOG-SPECIFIC: Prerequisite Builder Dialog
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .prerequisite-builder {
  background: linear-gradient(135deg, var(--swse-bg-dark) 0%, var(--swse-bg-mid) 100%);
}

[data-theme=holo] .prerequisite-builder-form {
  color: var(--swse-text-primary);
}

[data-theme=holo] .prerequisite-header h3 {
  color: var(--swse-primary);
  text-shadow: 0 0 5px rgba(0, 170, 255, 0.3);
}

[data-theme=holo] .prerequisite-header .help-text {
  color: var(--swse-text-secondary);
}

[data-theme=holo] .form-group label {
  color: var(--swse-text-primary);
}

[data-theme=holo] .mode-selector label.radio {
  color: var(--swse-text-light);
  cursor: pointer;
  padding: 8px;
  border-radius: 4px;
  transition: all 0.2s ease;
}

[data-theme=holo] .mode-selector label.radio:hover {
  background: rgba(0, 170, 255, 0.1);
}

[data-theme=holo] .mode-selector input[type="radio"] {
  accent-color: var(--swse-primary);
}

[data-theme=holo] .conditions-section h4 {
  color: var(--swse-primary);
  text-shadow: 0 0 5px rgba(0, 170, 255, 0.3);
}

[data-theme=holo] .condition-row {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid var(--swse-border-default);
  border-radius: 4px;
  padding: 10px;
  margin-bottom: 10px;
  display: flex;
  gap: 10px;
  align-items: center;
}

[data-theme=holo] .condition-row:hover {
  border-color: var(--swse-border-active);
  background: rgba(0, 170, 255, 0.05);
}

[data-theme=holo] .condition-type-select select,
[data-theme=holo] .condition-fields input,
[data-theme=holo] .condition-fields select {
  background: var(--swse-bg-light);
  color: var(--swse-text-primary);
  border: 1px solid var(--swse-border-default);
  border-radius: 4px;
}

[data-theme=holo] .condition-fields input:focus,
[data-theme=holo] .condition-fields select:focus {
  border-color: var(--swse-border-active);
  box-shadow: 0 0 10px rgba(0, 170, 255, 0.4);
}

[data-theme=holo] .condition-row button.remove-condition {
  background: var(--swse-danger);
  color: white;
  border: 1px solid var(--swse-danger);
  border-radius: 4px;
  padding: 4px 8px;
  cursor: pointer;
  font-size: 0.9em;
}

[data-theme=holo] .condition-row button.remove-condition:hover {
  box-shadow: 0 0 10px rgba(255, 107, 107, 0.6);
}

[data-theme=holo] .add-condition {
  background: linear-gradient(135deg, var(--swse-success) 0%, rgba(0, 255, 136, 0.7) 100%);
  color: var(--swse-bg-dark);
  border: 1px solid var(--swse-success);
  border-radius: 4px;
  padding: 8px 16px;
  cursor: pointer;
  margin-top: 10px;
}

[data-theme=holo] .add-condition:hover {
  box-shadow: 0 0 15px rgba(0, 255, 136, 0.6);
}

/* ═══════════════════════════════════════════════════════════════════════════
   DIALOG-SPECIFIC: Talent Tree Selection Dialog
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .talent-tree-selection {
  background: linear-gradient(135deg, var(--swse-bg-dark) 0%, var(--swse-bg-mid) 100%);
}

[data-theme=holo] .talent-tree-selection-container {
  color: var(--swse-text-primary);
}

[data-theme=holo] .selection-header h3 {
  color: var(--swse-primary);
  text-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
}

[data-theme=holo] .selection-header .hint {
  color: var(--swse-text-secondary);
}

[data-theme=holo] .tree-selection-grid {
  display: grid;
  gap: 15px;
}

[data-theme=holo] .tree-card {
  background: linear-gradient(135deg, var(--swse-bg-light) 0%, var(--swse-bg-mid) 100%);
  border: 1px solid var(--swse-border-default);
  border-radius: 8px;
  padding: 15px;
  cursor: pointer;
  transition: all 0.3s ease;
}

[data-theme=holo] .tree-card:hover {
  border-color: var(--swse-border-active);
  background: linear-gradient(135deg, rgba(0, 170, 255, 0.1) 0%, rgba(0, 217, 255, 0.05) 100%);
  box-shadow: 0 0 15px rgba(0, 170, 255, 0.4);
}

[data-theme=holo] .tree-card-header h4 {
  color: var(--swse-primary);
  margin: 0 0 5px 0;
}

[data-theme=holo] .talent-count,
[data-theme=holo] .owned-count {
  color: var(--swse-text-secondary);
  font-size: 0.85em;
}

[data-theme=holo] .tree-card-icon {
  color: var(--swse-secondary);
  font-size: 2em;
  margin-top: 10px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMMON COMPONENTS - Headers, sections, panels
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .swse h1,
[data-theme=holo] .swse h2,
[data-theme=holo] .swse h3,
[data-theme=holo] .swse h4,
[data-theme=holo] .swse h5,
[data-theme=holo] .swse h6 {
  color: var(--swse-primary);
}

[data-theme=holo] .swse .section-header {
  color: var(--swse-primary);
  text-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
  border-bottom: 1px solid var(--swse-border-default);
  padding-bottom: 10px;
}

[data-theme=holo] .swse p {
  color: var(--swse-text-light);
}

[data-theme=holo] .swse label {
  color: var(--swse-text-primary);
}

/* ═══════════════════════════════════════════════════════════════════════════
   SCROLLBARS - Unified scrollbar styling for all dialogs
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .swse::-webkit-scrollbar {
  width: 10px;
}

[data-theme=holo] .swse::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 5px;
}

[data-theme=holo] .swse::-webkit-scrollbar-thumb {
  background: var(--swse-primary);
  border-radius: 5px;
}

[data-theme=holo] .swse::-webkit-scrollbar-thumb:hover {
  background: var(--swse-secondary);
}

/* ═══════════════════════════════════════════════════════════════════════════
   DISABLED ELEMENTS - Styling for disabled inputs and buttons
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] .swse input:disabled,
[data-theme=holo] .swse select:disabled,
[data-theme=holo] .swse textarea:disabled {
  background: rgba(0, 0, 0, 0.3);
  color: var(--swse-text-muted);
  border-color: var(--swse-border-subtle);
  cursor: not-allowed;
}

[data-theme=holo] .swse button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ═══════════════════════════════════════════════════════════════════════════
   ACCESSIBILITY - Reduce motion support
   ═════════════════════════════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
  [data-theme=holo] .swse button,
  [data-theme=holo] .swse input,
  [data-theme=holo] .swse select {
    transition: none;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   FOUNDRY UI FIX - Restore toolbar icon visibility (Font Awesome ::before)
   ═════════════════════════════════════════════════════════════════════════ */

[data-theme=holo] button.ui-control.icon::before,
[data-theme=holo] button.ui-control.plain.icon::before {
  color: var(--swse-primary, #9fdcff) !important;
  opacity: 1 !important;
  text-shadow:
    0 0 6px rgba(120, 200, 255, 0.6),
    0 0 12px rgba(120, 200, 255, 0.3);
  font-family: "Font Awesome 6 Free" !important;
  font-weight: 900;
}

/* ═══════════════════════════════════════════════════════════════════════════
   SIDEBAR CONTAINMENT FIX - DEPRECATED
   ═════════════════════════════════════════════════════════════════════════

   PHASE 1 REMOVAL: These rules directly damaged Foundry core layout.
   They applied position: relative, overflow: hidden, and contain: layout paint
   to #sidebar, #sidebar-content - breaking the sidebar sliding mechanism.

   These rules are REMOVED to restore Foundry core integrity.
   SWSE theming is applied only to SWSE windows, never to core Foundry containers.
   ═════════════════════════════════════════════════════════════════════════ */

/* [REMOVED PHASE 1]
   - [data-theme=holo] #sidebar { position: relative !important; overflow: hidden !important; }
   - [data-theme=holo] #sidebar-content { position: relative !important; overflow: hidden !important; }
   - [data-theme=holo] #sidebar-content > * { overflow: auto; }
   - [data-theme=holo] #sidebar, #sidebar-content, .app.window-app with contain: layout paint
*/
