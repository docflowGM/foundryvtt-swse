/**
 * UX Polish â€” Phase K
 * Micro-animations, critical states, accessibility
 */

/* Critical HP tint */
.actor-sheet .hp-section.critical {
  background: rgba(255, 68, 68, 0.1);
  border-color: #ff4444;
  animation: critical-pulse 1s infinite;
}

@keyframes critical-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* Condition Track pulse */
.condition-track.helpless {
  background: rgba(255, 68, 68, 0.15);
  animation: ct-pulse 0.8s ease-in-out infinite;
}

@keyframes ct-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

/* Encumbrance warning highlight */
.encumbrance-indicator.heavy {
  background: rgba(255, 153, 0, 0.15);
  border: 2px solid #ff9900;
  animation: encumb-highlight 1.5s ease-in-out infinite;
}

@keyframes encumb-highlight {
  0%, 100% { box-shadow: 0 0 0 0 rgba(255, 153, 0, 0.4); }
  50% { box-shadow: 0 0 8px 2px rgba(255, 153, 0, 0.2); }
}

/* Free Build banner polish */
.banner-free-build {
  background: linear-gradient(135deg, #d4af37 0%, #f5deb3 50%, #d4af37 100%);
  color: #000;
  padding: 12px;
  border-radius: 4px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 4px 12px rgba(212, 175, 55, 0.4);
  animation: banner-glow 2s ease-in-out infinite;
}

@keyframes banner-glow {
  0%, 100% { box-shadow: 0 4px 12px rgba(212, 175, 55, 0.4); }
  50% { box-shadow: 0 4px 20px rgba(212, 175, 55, 0.8); }
}

/* Hover tooltips */
.tooltip-trigger {
  cursor: help;
  border-bottom: 1px dotted var(--swse-accent, #d4af37);
  position: relative;
}

.tooltip-trigger:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--swse-bg-secondary, #2b2b2b);
  border: 1px solid var(--swse-accent, #d4af37);
  color: var(--swse-text-primary, #fff);
  padding: 6px 10px;
  border-radius: 4px;
  font-size: 0.75rem;
  white-space: nowrap;
  z-index: 1000;
  animation: tooltip-fade 0.2s ease-out;
}

@keyframes tooltip-fade {
  from { opacity: 0; transform: translateX(-50%) translateY(4px); }
  to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* Smooth transitions for values */
.value-display {
  transition: all 0.3s ease;
}

.value-display.changed {
  color: var(--swse-color-success, #4a9d6f);
  animation: value-pop 0.4s ease-out;
}

@keyframes value-pop {
  0% { transform: scale(1.2); opacity: 0.5; }
  100% { transform: scale(1); opacity: 1; }
}

/* Button hover scale */
.btn {
  transition: all 0.15s ease;
}

.btn:hover {
  transform: scale(1.05);
}

.btn:active {
  transform: scale(0.95);
}

/* Smooth panel transitions */
.app {
  animation: panel-slide-in 0.3s ease-out;
}

@keyframes panel-slide-in {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Accessibility: focus states */
button:focus,
input:focus,
select:focus {
  outline: 2px solid var(--swse-accent, #d4af37);
  outline-offset: 2px;
}

/* Loading state spinner */
.spinner {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid var(--swse-border-accent, #444);
  border-top: 2px solid var(--swse-accent, #d4af37);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Success/Error flash */
.notification.success {
  animation: success-flash 0.5s ease-out;
}

@keyframes success-flash {
  0% { transform: scale(0.9); opacity: 0; }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); opacity: 1; }
}

/* Condition track color scale */
.ct-step {
  transition: background-color 0.2s ease;
}

.ct-step.normal { background: var(--swse-bg-secondary, #2b2b2b); }
.ct-step.wounded { background: rgba(255, 200, 0, 0.2); }
.ct-step.critical { background: rgba(255, 68, 68, 0.2); }
.ct-step.helpless { background: rgba(255, 68, 68, 0.4); }
