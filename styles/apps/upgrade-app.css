/**
 * SWSE Upgrade Application Styles
 * Foundry V13+ compliant
 * Holographic Star Wars themed upgrade dialog
 * Enhanced for accessibility, performance, and UX
 */

/* ================================================================= */
/* ROOT + THEME VARIABLES                                             */
/* ================================================================= */

.app.window-app.swse-upgrade-app {
  --swse-cyan: #00ffff;
  --swse-green: #00ff00;
  --swse-yellow: #ffff00;
  --swse-red: #ff4444;
  --swse-orange: #ff9900;
  --swse-purple: #ff00ff;

  --swse-bg-dark: #0a0e27;
  --swse-bg-light: #1a1f3a;

  background: linear-gradient(135deg, var(--swse-bg-dark), var(--swse-bg-light));
  border: 2px solid var(--swse-cyan);
  border-radius: 8px;
  color: var(--swse-cyan);
  font-family: 'Orbitron', sans-serif;
  box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
}

/* Remove default Foundry padding */
.app.window-app.swse-upgrade-app .window-content {
  padding: 0;
  background: transparent;
}

/* ================================================================= */
/* ACCESSIBILITY & FOCUS                                              */
/* ================================================================= */

.swse-upgrade-app button:focus-visible,
.swse-upgrade-app .install-upgrade:focus-visible,
.swse-upgrade-app .remove-upgrade:focus-visible {
  outline: 2px solid var(--swse-cyan);
  outline-offset: 2px;
}

/* ================================================================= */
/* HEADER                                                             */
/* ================================================================= */

.swse-upgrade-app .upgrade-header {
  background: linear-gradient(
    90deg,
    rgba(0, 255, 255, 0.1),
    rgba(0, 255, 255, 0.05)
  );
  border-bottom: 2px solid var(--swse-cyan);
  padding: 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.swse-upgrade-app .npc-portrait {
  display: flex;
  align-items: center;
  gap: 15px;
}

.swse-upgrade-app .npc-portrait img {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  border: 2px solid var(--swse-cyan);
  box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
}

.swse-upgrade-app .npc-info h2 {
  margin: 0;
  font-size: 1.5em;
  text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
}

.swse-upgrade-app .npc-title {
  font-size: 0.9em;
  color: #66d9ff;
  font-style: italic;
}

.swse-upgrade-app .item-info h3 {
  margin: 0;
  font-size: 1.3em;
  color: #ffffff;
  text-align: right;
}

.swse-upgrade-app .item-type {
  font-size: 0.85em;
  color: #aaaaaa;
  text-align: right;
  text-transform: capitalize;
}

/* ================================================================= */
/* NPC DIALOGUE                                                       */
/* ================================================================= */

.swse-upgrade-app .npc-dialogue {
  padding: 20px;
  background: rgba(0, 255, 255, 0.05);
  border-bottom: 1px solid rgba(0, 255, 255, 0.3);
}

.swse-upgrade-app .dialogue-bubble {
  background: linear-gradient(
    135deg,
    rgba(0, 100, 100, 0.2),
    rgba(0, 50, 50, 0.1)
  );
  border-left: 3px solid var(--swse-cyan);
  padding: 12px 15px;
  border-radius: 5px;
  margin-bottom: 10px;
}

.swse-upgrade-app .dialogue-bubble p {
  margin: 0;
  color: #ffffff;
  font-size: 0.95em;
  line-height: 1.5;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.6);
}

.dialogue-bubble.welcome { border-left-color: var(--swse-green); }
.dialogue-bubble.examining { border-left-color: var(--swse-yellow); }

/* ================================================================= */
/* SLOT STATUS                                                        */
/* ================================================================= */

.swse-upgrade-app .upgrade-slots-status {
  padding: 20px;
  background: rgba(0, 0, 0, 0.3);
  border-bottom: 1px solid rgba(0, 255, 255, 0.3);
}

.swse-upgrade-app .slots-bar {
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--swse-cyan);
  border-radius: 5px;
  height: 28px;
  overflow: hidden;
}

.swse-upgrade-app .slots-used {
  background: linear-gradient(90deg, var(--swse-cyan), #0088ff);
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #000;
  font-weight: bold;
  box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
}

/* ================================================================= */
/* UPGRADE SECTIONS                                                   */
/* ================================================================= */

.swse-upgrade-app .installed-upgrades-section h3,
.swse-upgrade-app .available-upgrades-section h3 {
  position: sticky;
  top: 0;
  background: linear-gradient(135deg, var(--swse-bg-dark), var(--swse-bg-light));
  z-index: 1;
  padding: 10px 0;
}

/* ================================================================= */
/* UPGRADE LISTS                                                      */
/* ================================================================= */

.swse-upgrade-app .installed-upgrades-list,
.swse-upgrade-app .available-upgrades-list {
  list-style: none;
  padding: 0;
  margin: 0;
  max-height: 300px;
  overflow-y: auto;
}

.swse-upgrade-app .installed-upgrade,
.swse-upgrade-app .available-upgrade {
  background: linear-gradient(
    135deg,
    rgba(0, 100, 100, 0.1),
    rgba(0, 50, 50, 0.05)
  );
  border: 1px solid rgba(0, 255, 255, 0.3);
  border-radius: 5px;
  padding: 15px;
  margin-bottom: 12px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  will-change: transform, box-shadow;
}

.swse-upgrade-app .available-upgrade:hover {
  transform: translateY(-1px);
  box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
}

/* ================================================================= */
/* AVAILABILITY                                                       */
/* ================================================================= */

.swse-upgrade-app .availability::before {
  content: "●";
  margin-right: 4px;
}

.availability.standard { color: var(--swse-green); }
.availability.licensed { color: var(--swse-yellow); }
.availability.restricted { color: var(--swse-orange); }
.availability.military { color: #ff6600; }
.availability.illegal { color: var(--swse-red); }
.availability.rare { color: var(--swse-purple); }

/* ================================================================= */
/* BUTTONS                                                            */
/* ================================================================= */

.swse-upgrade-app button {
  font-weight: bold;
  cursor: pointer;
}

.swse-upgrade-app button:disabled,
.swse-upgrade-app .install-upgrade.disabled {
  opacity: 0.4;
  cursor: not-allowed;
  box-shadow: none !important;
}

.install-upgrade {
  background: linear-gradient(135deg, #004400, #006600);
  border: 1px solid var(--swse-green);
  color: var(--swse-green);
}

.install-upgrade:hover {
  box-shadow: 0 0 15px rgba(0, 255, 0, 0.4);
}

.remove-upgrade {
  background: linear-gradient(135deg, #440000, #660000);
  border: 1px solid var(--swse-red);
  color: var(--swse-red);
}

.remove-upgrade:hover {
  box-shadow: 0 0 15px rgba(255, 68, 68, 0.4);
}

/* ================================================================= */
/* LOADING OVERLAY                                                    */
/* ================================================================= */

.swse-upgrade-app.loading {
  pointer-events: none;
  opacity: 0.85;
}

.swse-upgrade-app.loading::after {
  content: "Processing Upgrade…";
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(10, 14, 39, 0.85);
  color: var(--swse-cyan);
  font-weight: bold;
  letter-spacing: 1px;
  z-index: 10;
}

/* ================================================================= */
/* FOOTER                                                            */
/* ================================================================= */

.swse-upgrade-app .upgrade-footer {
  padding: 15px;
  background: rgba(0, 0, 0, 0.3);
  border-top: 1px solid rgba(0, 255, 255, 0.3);
  display: flex;
  justify-content: center;
}

/* ================================================================= */
/* SMALL SCREENS                                                      */
/* ================================================================= */

@media (max-height: 700px) {
  .swse-upgrade-app .available-upgrades-list,
  .swse-upgrade-app .installed-upgrades-list {
    max-height: 220px;
  }
}