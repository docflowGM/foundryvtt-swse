<form class="{{cssClass}} flexcol holo-theme" autocomplete="off">
    {{!-- Holographic Frame Header --}}
    <div class="holo-frame-top">
        <img class="sw-logo" src="systems/swse/assets/ui/logo.png" alt="Star Wars Saga Edition"/>
    </div>

  
  <!-- HEADER -->
  <header class="sheet-header">
    <div class="swse-logo"></div>
    
    <div class="header-fields">
      <div class="field-group">
        <label>Droid Designation</label>
        <input name="name" type="text" value="{{actor.name}}" placeholder="Enter Name"/>
      </div>
      
      <div class="field-row">
        <div class="field-group">
          <label>Droid Type</label>
          <select name="system.race" class="race-select">
            <option value="custom" {{#if (eq system.race "custom")}}selected{{/if}}>Custom</option>
            {{#each races as |race key|}}
              <option value="{{key}}" {{#if (eq ../system.race key)}}selected{{/if}}>{{race.label}}</option>
            {{/each}}
          </select>
        </div>
        
        <div class="field-group">
          <label>Class</label>
          <input name="system.class" type="text" value="{{system.class}}" placeholder="Class"/>
        </div>
        
        <div class="field-group">
          <label>Level</label>
          <input name="system.level" type="number" value="{{system.level}}" min="1"/ data-dtype="Number">
        </div>
      </div>
    </div>
    
    <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" alt="{{actor.name}}"/>
  </header>

  <!-- TABS NAVIGATION -->
  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="main">Main</a>
    <a class="item" data-tab="combat">Combat</a>
    <a class="item" data-tab="skills">Skills</a>
    <a class="item" data-tab="force">Force</a>
    <a class="item" data-tab="inventory">Equipment</a>
    <a class="item" data-tab="biography">Bio</a>
  </nav>

  <!-- SHEET BODY WITH TABS -->
  <section class="sheet-body">
    
    <!-- MAIN TAB -->
    <div class="tab" data-group="primary" data-tab="main">
      
      <!-- Level Up Section -->
      <div class="level-up-section">
        <div>
          <strong>Level {{system.level}}</strong>
          <span style="margin-left: 10px;">XP: {{system.xp.value}} / {{system.xp.required}}</span>
        </div>
        <button type="button" class="level-up">
          <i class="fas fa-arrow-up"></i> Level Up
        </button>
      </div>
      
      <div class="character-grid">
        
        <!-- ABILITIES -->
        <div class="character-section">
          <h3>Ability Scores</h3>
          <div class="abilities-grid">
            {{#each system.abilities as |ability key|}}
              <div class="ability-block">
                <label>{{toUpperCase key}}</label>
                <input type="number" name="system.abilities.{{key}}.base" value="{{ability.base}}" data-dtype="Number"/>
                <div class="ability-mod">{{#if (gte ability.mod 0)}}+{{/if}}{{ability.mod}}</div>
              </div>
            {{/each}}
          </div>
        </div>
        
        <!-- DEFENSES -->
        <div class="character-section">
          <h3>Defenses</h3>
          <div class="defenses-grid">
            {{#each system.defenses as |defense key|}}
              <div class="defense-block">
                <label>{{capitalize key}}</label>
                <div class="defense-value">{{defense.total}}</div>
                <input type="number" name="system.defenses.{{key}}.modifier" value="{{defense.modifier}}" placeholder="Misc" style="width: 60px; margin-top: 5px;"/ data-dtype="Number">
              </div>
            {{/each}}
          </div>
        </div>
        
        <!-- HIT POINTS -->
        <div class="character-section">
          <h3>Hit Points</h3>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="number" name="system.hp.value" value="{{system.hp.value}}" style="width: 80px; font-size: 24px; font-weight: bold; text-align: center;"/ data-dtype="Number">
            <span style="font-size: 20px;">/</span>
            <input type="number" name="system.hp.max" value="{{system.hp.max}}" style="width: 80px; font-size: 20px; text-align: center;"/ data-dtype="Number">
          </div>
          
          <div style="margin-top: 10px;">
            <label>Damage Threshold:</label>
            <strong>{{system.damageThreshold}}</strong>
          </div>
          
          <div style="margin-top: 10px;">
            <label>Condition Track:</label>
            <select name="system.conditionTrack">
              <option value="normal" {{#if (eq system.conditionTrack "normal")}}selected{{/if}}>Normal</option>
              <option value="-1" {{#if (eq system.conditionTrack "-1")}}selected{{/if}}>-1</option>
              <option value="-2" {{#if (eq system.conditionTrack "-2")}}selected{{/if}}>-2</option>
              <option value="-5" {{#if (eq system.conditionTrack "-5")}}selected{{/if}}>-5</option>
              <option value="-10" {{#if (eq system.conditionTrack "-10")}}selected{{/if}}>-10</option>
              <option value="helpless" {{#if (eq system.conditionTrack "helpless")}}selected{{/if}}>Helpless</option>
            </select>
          </div>
        </div>
        
        <!-- RESOURCES -->
        <div class="character-section">
          <h3>Resources</h3>
          
          <div style="margin-bottom: 10px;">
            <label>Force Points:</label>
            <input type="number" name="system.forcePoints.value" value="{{system.forcePoints.value}}" style="width: 50px;"/ data-dtype="Number"> / 
            <input type="number" name="system.forcePoints.max" value="{{system.forcePoints.max}}" style="width: 50px;"/ data-dtype="Number">
          </div>
          
          <div style="margin-bottom: 10px;">
            <label>Destiny Points:</label>
            <input type="number" name="system.destinyPoints.value" value="{{system.destinyPoints.value}}" style="width: 50px;"/ data-dtype="Number"> / 
            <input type="number" name="system.destinyPoints.max" value="{{system.destinyPoints.max}}" style="width: 50px;"/ data-dtype="Number">
          </div>
          
          <div>
            <label>Credits:</label>
            <input type="number" name="system.credits" value="{{system.credits}}" style="width: 100px;"/ data-dtype="Number">
          </div>
        </div>
        
      </div>
    </div>
    
    <!-- COMBAT TAB -->
    <div class="tab" data-group="primary" data-tab="combat">
      <div class="character-section">
        <h3>Weapons 
          <button type="button" class="add-weapon btn-add" style="float: right;">
            <i class="fas fa-plus"></i> Add
          </button>
        </h3>
        
        {{#if system.weapons}}
          {{#each system.weapons as |weapon index|}}
            <div class="weapon-entry item-entry" data-index="{{index}}">
              <i class="fas fa-grip-vertical" style="margin-right: 5px; color: #666; cursor: grab;"></i>
              <input type="text" name="system.weapons.{{index}}.name" value="{{weapon.name}}" placeholder="Weapon Name" style="flex: 1;"/>
              <input type="text" name="system.weapons.{{index}}.damage" value="{{weapon.damage}}" placeholder="Damage" style="width: 80px;"/>
              <div class="item-controls">
                <button type="button" class="roll-weapon btn-roll" title="Roll Attack">
                  <i class="fas fa-dice-d20"></i>
                </button>
                <button type="button" class="remove-weapon item-control delete" title="Remove">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          {{/each}}
        {{else}}
          <p style="color: #888; text-align: center; padding: 20px;">No weapons. Click Add to create one.</p>
        {{/if}}
      </div>
      
      <div class="character-section">
        <h3>Feats 
          <button type="button" class="add-feat btn-add" style="float: right;">
            <i class="fas fa-plus"></i> Add
          </button>
        </h3>
        
        {{#if system.feats}}
          <div class="items-list">
            {{#each system.feats as |feat index|}}
              <div class="item-entry list-entry" data-index="{{index}}">
                <span class="item-name">{{feat.name}}</span>
                <div class="item-controls">
                  <button type="button" class="remove-feat item-control delete">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            {{/each}}
          </div>
        {{else}}
          <p style="color: #888; text-align: center; padding: 10px;">No feats.</p>
        {{/if}}
      </div>
    </div>
    
    <!-- SKILLS TAB -->
    <div class="tab" data-group="primary" data-tab="skills">
      <div class="character-section">
        <h3>Skills</h3>
        <p style="color: #aaa; font-size: 12px;">Configure skills here</p>
        
        <button type="button" class="add-skill btn-add">
          <i class="fas fa-plus"></i> Add Custom Skill
        </button>
      </div>
    </div>
    
    <!-- FORCE TAB -->
    <div class="tab" data-group="primary" data-tab="force">
      <div class="character-section">
        <h3>Force Powers
          <button type="button" class="add-forcepower btn-add" style="float: right;">
            <i class="fas fa-plus"></i> Add
          </button>
        </h3>
        
        {{#if items}}
          <div class="forcepowers-grid">
            {{#each items as |item|}}
              {{#if (eq item.type "forcepower")}}
                <div class="forcepower-entry" data-item-id="{{item._id}}">
                  <i class="fas fa-hand-sparkles" style="margin-right: 8px; color: #4a90e2;"></i>
                  <span class="item-name">{{item.name}}</span>
                  <div class="forcepower-uses">
                    <span>{{item.system.uses.current}} / {{item.system.uses.max}}</span>
                    <button type="button" class="roll-forcepower btn-roll" title="Use Power">
                      <i class="fas fa-dice-d20"></i>
                    </button>
                    <button type="button" class="remove-forcepower item-control delete">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
              {{/if}}
            {{/each}}
          </div>
        {{else}}
          <p style="color: #888; text-align: center; padding: 20px;">No Force Powers.</p>
        {{/if}}
      </div>
      
      <div class="character-section">
        <h3>Talents
          <button type="button" class="add-talent btn-add" style="float: right;">
            <i class="fas fa-plus"></i> Add
          </button>
        </h3>
        
        {{#if system.talents}}
          <div class="items-list">
            {{#each system.talents as |talent index|}}
              <div class="item-entry list-entry" data-index="{{index}}">
                <span class="item-name">{{talent.name}}</span>
                <div class="item-controls">
                  <button type="button" class="remove-talent item-control delete">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            {{/each}}
          </div>
        {{else}}
          <p style="color: #888; text-align: center; padding: 10px;">No talents.</p>
        {{/if}}
      </div>
    </div>
    
    <!-- INVENTORY TAB -->
    <div class="tab equipment" data-group="primary" data-tab="inventory">
      <div class="character-section">
        <h3>Equipment</h3>
        <p style="color: #888; text-align: center; padding: 20px;">Drag items here from the Items sidebar</p>
      </div>
    </div>
    
    <!-- BIOGRAPHY TAB -->
    <div class="tab" data-group="primary" data-tab="biography">
      <div class="character-section">
        <h3>Biography</h3>
        <textarea name="system.bio" rows="10" style="width: 100%; background: rgba(0,0,0,0.3); border: 1px solid #666; color: #fff; padding: 10px;">{{system.bio}}</textarea>
      </div>
      
      <div class="character-section">
        <h3>Notes</h3>
        <textarea name="system.notes" rows="10" style="width: 100%; background: rgba(0,0,0,0.3); border: 1px solid #666; color: #fff; padding: 10px;">{{system.notes}}</textarea>
      </div>
    </div>
    
  </section>
</form>