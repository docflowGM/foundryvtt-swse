<form class="{{cssClass}} flexcol holo-theme vehicle-sheet" autocomplete="off">
    {{!-- Holographic Frame Header --}}
    <div class="holo-frame-top">
        <img class="sw-logo" src="systems/swse/assets/assets/ui/logo.png" alt="Star Wars Saga Edition"/>
    </div>

    {{!-- Header Section --}}
    <header class="sheet-header vehicle-header">
        <div class="header-row">
            <div class="vehicle-name-section">
                <label>Vehicle Name:</label>
                <input name="name" type="text" value="{{actor.name}}" placeholder="Enter Vehicle Name"/>
            </div>
            <div class="vehicle-type-section">
                <label>Type:</label>
                <input name="system.type" type="text" value="{{system.type}}" placeholder="Starfighter, Speeder, etc."/>
            </div>
        </div>
    </header>

    {{!-- Navigation Tabs --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item active" data-tab="main">Main Stats</a>
        <a class="item" data-tab="combat">Combat</a>
        <a class="item" data-tab="crew">Crew & Systems</a>
        <a class="item" data-tab="cargo">Cargo & Details</a>
    </nav>

    {{!-- Main Content --}}
    <section class="sheet-body">
        
        {{!-- MAIN STATS TAB --}}
        <div class="tab active" data-group="primary" data-tab="main">
            <div class="vehicle-display-container">
                
                {{!-- Central Vehicle Image --}}
                <div class="vehicle-image-container">
                    <img src="systems/swse/assets/assets/ui/vehicle-stats.png" class="vehicle-silhouette" alt="Vehicle"/>
                </div>

                {{!-- Stats Around the Vehicle --}}
                <div class="stat-displays">
                    
                    {{!-- Hull/HP (Top) --}}
                    <div class="stat-box stat-hull" style="top: 10%; left: 50%; transform: translateX(-50%);">
                        <div class="stat-label">HULL POINTS</div>
                        <div class="stat-value-group">
                            <input type="number" name="system.hull.value" value="{{system.hull.value}}" data-dtype="Number" class="stat-input"/> 
                            <span class="stat-separator">/</span>
                            <input type="number" name="system.hull.max" value="{{system.hull.max}}" data-dtype="Number" class="stat-input"/>
                        </div>
                        <div class="connector-line line-hull"></div>
                    </div>

                    {{!-- Speed (Top Right) --}}
                    <div class="stat-box stat-speed" style="top: 15%; right: 10%;">
                        <div class="stat-label">SPEED</div>
                        <div class="stat-value">
                            <input type="text" name="system.speed" value="{{system.speed}}" placeholder="12 squares"/>
                        </div>
                        <div class="connector-line line-speed"></div>
                    </div>

                    {{!-- Shields (Right) --}}
                    <div class="stat-box stat-shields" style="top: 40%; right: 8%;">
                        <div class="stat-label">SHIELDS</div>
                        <div class="stat-value-group">
                            <input type="number" name="system.shields.value" value="{{system.shields.value}}" data-dtype="Number" class="stat-input" placeholder="0"/> 
                            <span class="stat-separator">/</span>
                            <input type="number" name="system.shields.max" value="{{system.shields.max}}" data-dtype="Number" class="stat-input" placeholder="0"/>
                        </div>
                        <div class="connector-line line-shields"></div>
                    </div>

                    {{!-- Hyperdrive (Bottom Right) --}}
                    <div class="stat-box stat-hyperdrive" style="bottom: 20%; right: 12%;">
                        <div class="stat-label">HYPERDRIVE</div>
                        <div class="stat-value">
                            <input type="text" name="system.hyperdrive_class" value="{{system.hyperdrive_class}}" placeholder="x1.0" style="width: 60px;"/>
                        </div>
                        <div class="stat-sublabel">Backup:</div>
                        <div class="stat-value">
                            <input type="text" name="system.backup_class" value="{{system.backup_class}}" placeholder="x12" style="width: 60px;"/>
                        </div>
                        <div class="connector-line line-hyperdrive"></div>
                    </div>

                    {{!-- Weapons (Bottom) --}}
                    <div class="stat-box stat-weapons" style="bottom: 10%; left: 50%; transform: translateX(-50%);">
                        <div class="stat-label">WEAPONS</div>
                        <div class="stat-value">
                            {{#if system.weapons}}
                                <span class="weapon-count">{{system.weapons.length}} Mounted</span>
                            {{else}}
                                <span class="weapon-count">0 Mounted</span>
                            {{/if}}
                        </div>
                        <div class="connector-line line-weapons"></div>
                    </div>

                    {{!-- Cargo (Bottom Left) --}}
                    <div class="stat-box stat-cargo" style="bottom: 20%; left: 12%;">
                        <div class="stat-label">CARGO</div>
                        <div class="stat-value">
                            <input type="text" name="system.cargo_capacity" value="{{system.cargo_capacity}}" placeholder="100 kg"/>
                        </div>
                        <div class="connector-line line-cargo"></div>
                    </div>

                    {{!-- Crew (Left) --}}
                    <div class="stat-box stat-crew" style="top: 40%; left: 8%;">
                        <div class="stat-label">CREW</div>
                        <div class="stat-value">
                            <input type="text" name="system.crew" value="{{system.crew}}" placeholder="1 (Skilled)"/>
                        </div>
                        <div class="stat-sublabel">Passengers:</div>
                        <div class="stat-value">
                            <input type="text" name="system.passengers" value="{{system.passengers}}" placeholder="6" style="width: 80px;"/>
                        </div>
                        <div class="connector-line line-crew"></div>
                    </div>

                    {{!-- Consumables (Top Left) --}}
                    <div class="stat-box stat-consumables" style="top: 15%; left: 10%;">
                        <div class="stat-label">CONSUMABLES</div>
                        <div class="stat-value">
                            <input type="text" name="system.consumables" value="{{system.consumables}}" placeholder="2 months"/>
                        </div>
                        <div class="connector-line line-consumables"></div>
                    </div>

                </div>
            </div>

            {{!-- Qassets/uick Stats Bar --}}
            <div class="qassets/uick-stats-bar">
                <div class="qassets/uick-stat">
                    <label>Size:</label>
                    <input type="text" name="system.size" value="{{system.size}}" placeholder="Colossal"/>
                </div>
                <div class="qassets/uick-stat">
                    <label>Cost (New):</label>
                    <input type="number" name="system.cost.new" value="{{system.cost.new}}" data-dtype="Number" placeholder="150000"/>
                    <span class="credits-label">cr</span>
                </div>
                <div class="qassets/uick-stat">
                    <label>Cost (Used):</label>
                    <input type="number" name="system.cost.used" value="{{system.cost.used}}" data-dtype="Number" placeholder="75000"/>
                    <span class="credits-label">cr</span>
                </div>
            </div>
        </div>

        {{!-- COMBAT TAB --}}
        <div class="tab" data-group="primary" data-tab="combat">
            <div class="combat-section">
                
                {{!-- Defense Stats --}}
                <div class="defense-stats-grid">
                    <div class="defense-stat">
                        <label>Reflex Defense:</label>
                        <input type="number" name="system.reflexDefense" value="{{system.reflexDefense}}" data-dtype="Number" placeholder="19"/>
                    </div>
                    <div class="defense-stat">
                        <label>Flat-Footed:</label>
                        <input type="number" name="system.flatFooted" value="{{system.flatFooted}}" data-dtype="Number" placeholder="16"/>
                    </div>
                    <div class="defense-stat">
                        <label>Fortitude Defense:</label>
                        <input type="number" name="system.fortitudeDefense" value="{{system.fortitudeDefense}}" data-dtype="Number" placeholder="22"/>
                    </div>
                    <div class="defense-stat">
                        <label>Damage Threshold:</label>
                        <input type="number" name="system.damageThreshold" value="{{system.damageThreshold}}" data-dtype="Number" placeholder="32"/>
                    </div>
                    <div class="defense-stat">
                        <label>Damage Reduction:</label>
                        <input type="number" name="system.damageReduction" value="{{system.damageReduction}}" data-dtype="Number" placeholder="10"/>
                    </div>
                    <div class="defense-stat">
                        <label>Initiative:</label>
                        <input type="text" name="system.initiative" value="{{system.initiative}}" placeholder="+4"/>
                    </div>
                </div>

                {{!-- Maneuver & Attack --}}
                <div class="combat-modifiers">
                    <div class="combat-modifier">
                        <label>Maneuver:</label>
                        <input type="text" name="system.maneuver" value="{{system.maneuver}}" placeholder="+4"/>
                    </div>
                    <div class="combat-modifier">
                        <label>Base Attack Bonus:</label>
                        <input type="text" name="system.baseAttackBonus" value="{{system.baseAttackBonus}}" placeholder="+6"/>
                    </div>
                </div>

                {{!-- Weapons List --}}
                <div class="weapons-section">
                    <h3>Weapons Systems</h3>
                    <div class="weapons-header">
                        <span class="weapon-col-name">Weapon</span>
                        <span class="weapon-col-arc">Arc</span>
                        <span class="weapon-col-bonus">Attack</span>
                        <span class="weapon-col-damage">Damage</span>
                        <span class="weapon-col-range">Range</span>
                        <span class="weapon-col-actions">Actions</span>
                    </div>
                    <div class="weapons-list">
                        {{#each system.weapons as |weapon idx|}}
                        <div class="weapon-item">
                            <input type="text" name="system.weapons.{{idx}}.name" value="{{weapon.name}}" placeholder="Laser Cannon" class="weapon-name"/>
                            <input type="text" name="system.weapons.{{idx}}.arc" value="{{weapon.arc}}" placeholder="Forward" class="weapon-arc"/>
                            <input type="text" name="system.weapons.{{idx}}.bonus" value="{{weapon.bonus}}" placeholder="+10" class="weapon-bonus"/>
                            <input type="text" name="system.weapons.{{idx}}.damage" value="{{weapon.damage}}" placeholder="5d10x2" class="weapon-damage"/>
                            <input type="text" name="system.weapons.{{idx}}.range" value="{{weapon.range}}" placeholder="Close" class="weapon-range"/>
                            <button type="button" class="weapon-remove" data-index="{{idx}}" title="Remove Weapon">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        {{/each}}
                    </div>
                    <button type="button" class="weapon-add">
                        <i class="fas fa-plus"></i> Add Weapon
                    </button>
                </div>

                {{!-- Sensors --}}
                <div class="sensors-section">
                    <label>Sensors:</label>
                    <textarea name="system.senses" rows="2">{{system.senses}}</textarea>
                </div>
            </div>
        </div>

        {{!-- CREW & SYSTEMS TAB --}}
        <div class="tab" data-group="primary" data-tab="crew">
            <div class="crew-section">
                <h3>Crew Positions</h3>
                
                <div class="crew-positions-grid">
                    <div class="crew-position">
                        <label>Pilot:</label>
                        <div class="crew-slot" data-slot="pilot">
                            {{#if system.crewPositions.pilot}}
                                <span class="crew-member">{{system.crewPositions.pilot}}</span>
                            {{else}}
                                <span class="crew-empty">Unassigned</span>
                            {{/if}}
                        </div>
                    </div>

                    <div class="crew-position">
                        <label>Co-Pilot:</label>
                        <div class="crew-slot" data-slot="copilot">
                            {{#if system.crewPositions.copilot}}
                                <span class="crew-member">{{system.crewPositions.copilot}}</span>
                            {{else}}
                                <span class="crew-empty">Unassigned</span>
                            {{/if}}
                        </div>
                    </div>

                    <div class="crew-position">
                        <label>Gunner(s):</label>
                        <div class="crew-slot" data-slot="gunner">
                            {{#if system.crewPositions.gunner}}
                                <span class="crew-member">{{system.crewPositions.gunner}}</span>
                            {{else}}
                                <span class="crew-empty">Unassigned</span>
                            {{/if}}
                        </div>
                    </div>

                    <div class="crew-position">
                        <label>Engineer:</label>
                        <div class="crew-slot" data-slot="engineer">
                            {{#if system.crewPositions.engineer}}
                                <span class="crew-member">{{system.crewPositions.engineer}}</span>
                            {{else}}
                                <span class="crew-empty">Unassigned</span>
                            {{/if}}
                        </div>
                    </div>

                    <div class="crew-position">
                        <label>Shields:</label>
                        <div class="crew-slot" data-slot="shields">
                            {{#if system.crewPositions.shields}}
                                <span class="crew-member">{{system.crewPositions.shields}}</span>
                            {{else}}
                                <span class="crew-empty">Unassigned</span>
                            {{/if}}
                        </div>
                    </div>

                    <div class="crew-position">
                        <label>Commander:</label>
                        <div class="crew-slot" data-slot="commander">
                            {{#if system.crewPositions.commander}}
                                <span class="crew-member">{{system.crewPositions.commander}}</span>
                            {{else}}
                                <span class="crew-empty">Unassigned</span>
                            {{/if}}
                        </div>
                    </div>
                </div>

                <div class="crew-notes">
                    <label>Crew Notes:</label>
                    <textarea name="system.crewNotes" rows="3" placeholder="Additional crew information...">{{system.crewNotes}}</textarea>
                </div>
            </div>
        </div>

        {{!-- CARGO & DETAILS TAB --}}
        <div class="tab" data-group="primary" data-tab="cargo">
            <div class="details-section">
                
                <div class="carried-craft">
                    <label>Carried Craft:</label>
                    <textarea name="system.carried_craft" rows="2" placeholder="2 Starfighters, 1 Shuttle...">{{system.carried_craft}}</textarea>
                </div>

                <div class="tags-section">
                    <label>Tags:</label>
                    <div class="tags-list">
                        {{#each system.tags as |tag|}}
                            <span class="tag-item">{{tag}}</span>
                        {{/each}}
                    </div>
                    <input type="text" name="system.tagsInput" placeholder="Add tags (comma-separated)" class="tags-input"/>
                </div>

                <div class="reference-section">
                    <div class="reference-item">
                        <label>Sourcebook:</label>
                        <input type="text" name="system.sourcebook" value="{{system.sourcebook}}" placeholder="Core Rulebook"/>
                    </div>
                    <div class="reference-item">
                        <label>Page:</label>
                        <input type="number" name="system.page" value="{{system.page}}" data-dtype="Number" placeholder="242"/>
                    </div>
                </div>

                <div class="description-section">
                    <label>Description:</label>
                    <textarea name="system.description" rows="8" placeholder="Vehicle description and history...">{{system.description}}</textarea>
                </div>
            </div>
        </div>

    </section>

    {{!-- Footer --}}
    <div class="holo-frame-bottom"></div>
</form>