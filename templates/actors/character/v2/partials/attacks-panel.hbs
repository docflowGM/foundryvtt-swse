{{!-- ========================================= --}}
{{!-- SWSE V2 ATTACK CARDS (Flip Architecture) --}}
{{!-- ========================================= --}}

<div class="swse-attacks-panel">

  {{#each combat.attacks as |attack|}}
  <div class="swse-attack-card" data-attack-id="{{attack.id}}">
    <div class="card-inner">

      {{!-- ================= FRONT ================= --}}
      <div class="card-front">
        <div class="attack-name">{{attack.name}}</div>

        <div class="attack-primary">
          <div class="attack-bonus">
            {{attack.attackTotal}}
          </div>

          <div class="attack-damage">
            {{attack.damageFormula}}
          </div>
        </div>

        <div class="attack-crit">
          Crit {{attack.critRange}}Ã—{{attack.critMult}}
        </div>

        <div class="attack-tags">
          {{#each attack.tags}}
            <span class="tag">{{this}}</span>
          {{/each}}
        </div>

        <button class="attack-roll-btn" data-action="roll-attack">
          ROLL
        </button>
      </div>

      {{!-- ================= BACK ================= --}}
      <div class="card-back">

        <div class="breakdown-section">
          <div class="section-title">Attack Breakdown</div>
          <div class="pill-row">
            {{#each attack.breakdown.attack}}
              <span class="pill">
                {{label}} {{value}}
              </span>
            {{/each}}
          </div>
        </div>

        <div class="breakdown-section">
          <div class="section-title">Damage Breakdown</div>
          <div class="pill-row">
            {{#each attack.breakdown.damage}}
              <span class="pill">
                {{label}} {{value}}
              </span>
            {{/each}}
          </div>
        </div>

        {{#if attack.breakdown.conditional.length}}
        <div class="breakdown-section">
          <div class="section-title">Conditional</div>
          <div class="pill-row">
            {{#each attack.breakdown.conditional}}
              <span class="pill conditional">
                {{label}} {{value}}
              </span>
            {{/each}}
          </div>
        </div>
        {{/if}}

      </div>

    </div>
  </div>
  {{/each}}

</div>
