<form class="meta-tuning-config">
  <header class="config-header">
    <h2><i class="{{getIconClass 'slidersH'}}"></i> Suggestion Engine Configuration</h2>
    <p class="config-description">
      Customize how the suggestion engine weights feats, talents, and classes.
    </p>
  </header>

  {{!-- PRESET BUTTONS --}}
  <div class="preset-section">
    <label>Quick Presets:</label>
    <div class="preset-buttons">
      <button type="button" class="preset-btn" data-preset="balanced" title="Default balanced settings">
        <i class="{{getIconClass 'balanceScale'}}"></i> Balanced
      </button>
      <button type="button" class="preset-btn" data-preset="prestigeFocused" title="Prioritize prestige class progression">
        <i class="{{getIconClass 'crown'}}"></i> Prestige Focus
      </button>
      <button type="button" class="preset-btn" data-preset="combatOptimized" title="Emphasize combat effectiveness">
        <i class="{{getIconClass 'PLACEHOLDER_'}}"></i> Combat
      </button>
      <button type="button" class="preset-btn" data-preset="forceUser" title="Prioritize Force-related options">
        <i class="{{getIconClass 'jedi'}}"></i> Force User
      </button>
      <button type="button" class="preset-btn" data-preset="roleplay" title="Emphasize roleplay and social options">
        <i class="{{getIconClass 'th'}}eater-masks"></i> Roleplay
      </button>
    </div>
  </div>

  <nav class="config-tabs">
    <a class="tab" data-tab="tiers"><i class="{{getIconClass 'layerGroup'}}"></i> Tier Weights</a>
    <a class="tab" data-tab="themes"><i class="{{getIconClass 'tag'}}s"></i> Themes</a>
    <a class="tab" data-tab="display"><i class="{{getIconClass 'eye'}}"></i> Display</a>
    <a class="tab" data-tab="advanced"><i class="{{getIconClass 'cog'}}"></i> Advanced</a>
  </nav>

  <div class="config-content">
    {{!-- TIER WEIGHTS TAB --}}
    <section class="tab-section" data-tab="tiers">
      <h3>Feat/Talent Suggestion Tiers</h3>
      <p class="section-description">Adjust the weight of each suggestion tier. Higher values = more important.</p>

      <div class="slider-group">
        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'crown'}} tier-prestige"></i>
            Prestige Prerequisite
          </label>
          <div class="slider-control">
            <input type="range" name="tierWeights.prestigePrereq" min="0" max="2" step="0.1"
                   value="{{config.tierWeights.prestigePrereq}}">
            <span class="slider-value">{{config.tierWeights.prestigePrereq}}</span>
          </div>
        </div>

        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'link'}} tier-chain"></i>
            Chain Continuation
          </label>
          <div class="slider-control">
            <input type="range" name="tierWeights.chainContinuation" min="0" max="2" step="0.1"
                   value="{{config.tierWeights.chainContinuation}}">
            <span class="slider-value">{{config.tierWeights.chainContinuation}}</span>
          </div>
        </div>

        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'bullseye'}} tier-skill"></i>
            Skill Match
          </label>
          <div class="slider-control">
            <input type="range" name="tierWeights.skillMatch" min="0" max="2" step="0.1"
                   value="{{config.tierWeights.skillMatch}}">
            <span class="slider-value">{{config.tierWeights.skillMatch}}</span>
          </div>
        </div>

        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'fist'}} tier-ability"></i>
            Ability Match
          </label>
          <div class="slider-control">
            <input type="range" name="tierWeights.abilityMatch" min="0" max="2" step="0.1"
                   value="{{config.tierWeights.abilityMatch}}">
            <span class="slider-value">{{config.tierWeights.abilityMatch}}</span>
          </div>
        </div>

        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'users'}}-cog tier-class"></i>
            Class Synergy
          </label>
          <div class="slider-control">
            <input type="range" name="tierWeights.classSynergy" min="0" max="2" step="0.1"
                   value="{{config.tierWeights.classSynergy}}">
            <span class="slider-value">{{config.tierWeights.classSynergy}}</span>
          </div>
        </div>
      </div>

      <h3>Class Suggestion Tiers</h3>
      <p class="section-description">Adjust weights for class suggestions during level-up.</p>

      <div class="slider-group">
        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'star'}}"></i>
            Prestige Qualified Now
          </label>
          <div class="slider-control">
            <input type="range" name="classTierWeights.prestigeNow" min="0" max="2" step="0.1"
                   value="{{config.classTierWeights.prestigeNow}}">
            <span class="slider-value">{{config.classTierWeights.prestigeNow}}</span>
          </div>
        </div>

        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'route'}}"></i>
            Path Continuation
          </label>
          <div class="slider-control">
            <input type="range" name="classTierWeights.pathContinuation" min="0" max="2" step="0.1"
                   value="{{config.classTierWeights.pathContinuation}}">
            <span class="slider-value">{{config.classTierWeights.pathContinuation}}</span>
          </div>
        </div>

        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'unlock'}}"></i>
            Prestige Soon
          </label>
          <div class="slider-control">
            <input type="range" name="classTierWeights.prestigeSoon" min="0" max="2" step="0.1"
                   value="{{config.classTierWeights.prestigeSoon}}">
            <span class="slider-value">{{config.classTierWeights.prestigeSoon}}</span>
          </div>
        </div>

        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'PLACEHOLDER_'}}"></i>
            Mechanical Synergy
          </label>
          <div class="slider-control">
            <input type="range" name="classTierWeights.mechanicalSynergy" min="0" max="2" step="0.1"
                   value="{{config.classTierWeights.mechanicalSynergy}}">
            <span class="slider-value">{{config.classTierWeights.mechanicalSynergy}}</span>
          </div>
        </div>

        <div class="slider-row">
          <label>
            <i class="{{getIconClass 'heart'}}"></i>
            Thematic Fit
          </label>
          <div class="slider-control">
            <input type="range" name="classTierWeights.thematic" min="0" max="2" step="0.1"
                   value="{{config.classTierWeights.thematic}}">
            <span class="slider-value">{{config.classTierWeights.thematic}}</span>
          </div>
        </div>
      </div>

      <div class="slider-row prestige-priority">
        <label>
          <i class="{{getIconClass 'crown'}}"></i>
          Overall Prestige Priority
        </label>
        <div class="slider-control wide">
          <input type="range" name="prestigePriority" min="0" max="2" step="0.1"
                 value="{{config.prestigePriority}}">
          <span class="slider-value">{{config.prestigePriority}}</span>
        </div>
        <p class="slider-hint">0 = Ignore prestige, 1 = Normal, 2 = High priority</p>
      </div>
    </section>

    {{!-- THEMES TAB --}}
    <section class="tab-section" data-tab="themes">
      <h3>Theme Emphasis</h3>
      <p class="section-description">
        Adjust how strongly each theme type influences suggestions.
        Higher values = stronger preference for that theme.
      </p>

      <div class="theme-grid">
        <div class="theme-slider">
          <label><i class="{{getIconClass 'jedi'}} theme-force"></i> Force</label>
          <input type="range" name="themeEmphasis.force" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.force}}">
          <span class="slider-value">{{config.themeEmphasis.force}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'target'}} theme-ranged"></i> Ranged</label>
          <input type="range" name="themeEmphasis.ranged" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.ranged}}">
          <span class="slider-value">{{config.themeEmphasis.ranged}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'fist'}} theme-melee"></i> Melee</label>
          <input type="range" name="themeEmphasis.melee" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.melee}}">
          <span class="slider-value">{{config.themeEmphasis.melee}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'user'}}-ninja theme-stealth"></i> Stealth</label>
          <input type="range" name="themeEmphasis.stealth" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.stealth}}">
          <span class="slider-value">{{config.themeEmphasis.stealth}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'comment'}}s theme-social"></i> Social</label>
          <input type="range" name="themeEmphasis.social" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.social}}">
          <span class="slider-value">{{config.themeEmphasis.social}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'microchip'}} theme-tech"></i> Tech</label>
          <input type="range" name="themeEmphasis.tech" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.tech}}">
          <span class="slider-value">{{config.themeEmphasis.tech}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'users'}} theme-leadership"></i> Leadership</label>
          <input type="range" name="themeEmphasis.leadership" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.leadership}}">
          <span class="slider-value">{{config.themeEmphasis.leadership}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'compass'}} theme-exploration"></i> Exploration</label>
          <input type="range" name="themeEmphasis.exploration" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.exploration}}">
          <span class="slider-value">{{config.themeEmphasis.exploration}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'shuttle'}} theme-vehicle"></i> Vehicle</label>
          <input type="range" name="themeEmphasis.vehicle" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.vehicle}}">
          <span class="slider-value">{{config.themeEmphasis.vehicle}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'handHoldingHeart'}} theme-support"></i> Support</label>
          <input type="range" name="themeEmphasis.support" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.support}}">
          <span class="slider-value">{{config.themeEmphasis.support}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'swords'}} theme-combat"></i> Combat</label>
          <input type="range" name="themeEmphasis.combat" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.combat}}">
          <span class="slider-value">{{config.themeEmphasis.combat}}</span>
        </div>

        <div class="theme-slider">
          <label><i class="{{getIconClass 'search'}}-location theme-tracking"></i> Tracking</label>
          <input type="range" name="themeEmphasis.tracking" min="0" max="2" step="0.1"
                 value="{{config.themeEmphasis.tracking}}">
          <span class="slider-value">{{config.themeEmphasis.tracking}}</span>
        </div>
      </div>
    </section>

    {{!-- DISPLAY TAB --}}
    <section class="tab-section" data-tab="display">
      <h3>Display Options</h3>
      <p class="section-description">Control what suggestion features are shown in the UI.</p>

      <div class="checkbox-group">
        <label class="checkbox-row">
          <input type="checkbox" name="display.showSuggestionBadges"
                 {{#if config.display.showSuggestionBadges}}checked{{/if}}>
          <span class="checkbox-label">Show suggestion badges on feats/talents</span>
          <span class="checkbox-hint">Colored icons indicating why something is suggested</span>
        </label>

        <label class="checkbox-row">
          <input type="checkbox" name="display.showPrestigeRoadmap"
                 {{#if config.display.showPrestigeRoadmap}}checked{{/if}}>
          <span class="checkbox-label">Enable Prestige Roadmap</span>
          <span class="checkbox-hint">Visual progress tracker for prestige classes</span>
        </label>

        <label class="checkbox-row">
          <input type="checkbox" name="display.showPathPreview"
                 {{#if config.display.showPathPreview}}checked{{/if}}>
          <span class="checkbox-label">Show path preview</span>
          <span class="checkbox-hint">"In X levels you could qualify for..." messages</span>
        </label>

        <label class="checkbox-row">
          <input type="checkbox" name="display.showMissingPrereqs"
                 {{#if config.display.showMissingPrereqs}}checked{{/if}}>
          <span class="checkbox-label">Show missing prerequisites</span>
          <span class="checkbox-hint">Display what's needed for prestige classes</span>
        </label>
      </div>

      <div class="slider-row standalone">
        <label>Maximum suggestions per category</label>
        <div class="slider-control">
          <input type="range" name="display.maxSuggestionsPerCategory" min="1" max="10" step="1"
                 value="{{config.display.maxSuggestionsPerCategory}}">
          <span class="slider-value">{{config.display.maxSuggestionsPerCategory}}</span>
        </div>
      </div>
    </section>

    {{!-- ADVANCED TAB --}}
    <section class="tab-section" data-tab="advanced">
      <h3>Advanced Settings</h3>
      <p class="section-description">Fine-tune the suggestion algorithm. Modify with caution.</p>

      <div class="slider-group">
        <div class="slider-row">
          <label>Prestige confidence threshold</label>
          <div class="slider-control">
            <input type="range" name="advanced.prestigeConfidenceThreshold" min="0.1" max="0.8" step="0.05"
                   value="{{config.advanced.prestigeConfidenceThreshold}}">
            <span class="slider-value">{{config.advanced.prestigeConfidenceThreshold}}</span>
          </div>
          <p class="slider-hint">Minimum confidence to show prestige class recommendations</p>
        </div>

        <div class="slider-row">
          <label>Path preview levels</label>
          <div class="slider-control">
            <input type="range" name="advanced.pathPreviewLevels" min="1" max="10" step="1"
                   value="{{config.advanced.pathPreviewLevels}}">
            <span class="slider-value">{{config.advanced.pathPreviewLevels}}</span>
          </div>
          <p class="slider-hint">How many levels ahead to show in path preview</p>
        </div>

        <div class="slider-row">
          <label>Chain continuation bonus</label>
          <div class="slider-control">
            <input type="range" name="advanced.chainBonus" min="1" max="2" step="0.1"
                   value="{{config.advanced.chainBonus}}">
            <span class="slider-value">{{config.advanced.chainBonus}}</span>
          </div>
          <p class="slider-hint">Multiplier for options that continue existing chains</p>
        </div>

        <div class="slider-row">
          <label>Primary theme bonus</label>
          <div class="slider-control">
            <input type="range" name="advanced.primaryThemeBonus" min="1" max="2" step="0.1"
                   value="{{config.advanced.primaryThemeBonus}}">
            <span class="slider-value">{{config.advanced.primaryThemeBonus}}</span>
          </div>
          <p class="slider-hint">Multiplier for options matching primary build themes</p>
        </div>
      </div>
    </section>
  </div>

  <footer class="config-footer">
    <button type="button" class="reset-defaults">
      <i class="fas fa-rotate-left"></i> Reset to Defaults
    </button>
    <button type="submit" class="save-config">
      <i class="{{getIconClass 'save'}}"></i> Save Configuration
    </button>
  </footer>
</form>

