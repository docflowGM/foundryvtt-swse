<div class="nonheroic-units-browser">
  <div class="browser-header">
    <h2>Nonheroic Units Browser</h2>
    <p class="help-text">Search and drag units onto NPC character sheets, or import them to the NPC compendium</p>
  </div>

  <div class="browser-controls">
    <div class="search-box">
      <i class="{{getIconClass 'search'}}"></i>
      <input type="text" id="unit-search" placeholder="Search by name or type..." value="{{searchTerm}}">
    </div>

    <div class="filter-box">
      <label for="cl-filter">Challenge Level:</label>
      <select id="cl-filter">
        <option value="all" {{#if (eq challengeLevelFilter 'all')}}selected{{/if}}>All</option>
        {{#each challengeLevels as |cl|}}
          <option value="{{cl}}" {{#if (eq ../challengeLevelFilter cl)}}selected{{/if}}>CL {{cl}}</option>
        {{/each}}
      </select>
    </div>

    <div class="result-count">
      Showing {{filteredCount}} of {{totalUnits}} units
    </div>
  </div>

  <div class="browser-actions">
    <button type="button" id="import-all-btn" class="import-btn">
      <i class="{{getIconClass 'fileImport'}}"></i> Bulk Import to Compendium
    </button>
  </div>

  <div class="units-list">
    {{#if units}}
      {{#each units as |unit index|}}
        <div class="unit-entry" data-index="{{index}}" draggable="true">
          <div class="unit-info">
            <h3 class="unit-name">{{unit.name}}</h3>
            <div class="unit-stats">
              {{#if unit.challengeLevel}}
                <span class="stat-badge cl-badge">CL {{unit.challengeLevel}}</span>
              {{/if}}
              {{#if unit.size}}
                <span class="stat-badge size-badge">{{unit.size}}</span>
              {{/if}}
              {{#if unit.speciesType}}
                <span class="stat-badge type-badge">{{unit.speciesType}}</span>
              {{/if}}
              <span class="stat-badge hp-badge">HP {{unit.hp.max}}</span>
            </div>
            <div class="unit-defenses">
              <span>Ref {{unit.defenses.reflex.total}}</span>
              <span>Fort {{unit.defenses.fort.total}}</span>
              <span>Will {{unit.defenses.will.total}}</span>
            </div>
          </div>
          <div class="unit-actions">
            <button type="button" class="import-unit-btn" title="Import to Compendium">
              <i class="{{getIconClass 'download'}}"></i>
            </button>
            <i class="{{getIconClass 'gripVertical'}} drag-handle" title="Drag onto NPC sheet"></i>
          </div>
        </div>
      {{/each}}
    {{else}}
      <div class="no-results">
        <p>No units found matching your search criteria.</p>
      </div>
    {{/if}}
  </div>

  <div class="browser-footer">
    <p class="help-text">
      <strong>Tip:</strong> Drag a unit directly onto an NPC character sheet to apply its stats instantly!
    </p>
  </div>
</div>

