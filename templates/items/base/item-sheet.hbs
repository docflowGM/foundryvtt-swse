<div class="swse-sheet">
<form class="{{cssClass}} sheet-item flexcol" autocomplete="off">
 {{!-- Holographic Frame Header --}}
 <div class="holo-frame-top">
 <img class="sw-logo" src="systems/foundryvtt-swse/assets/ui/swse-logo.png" alt="Star Wars Saga Edition"/>
 </div>


 <!-- Header -->
 <header class="sheet-header flexrow">
 <img src="{{item.img}}" title="{{item.name}}" class="profile-img" />
 <div class="header-fields flexcol">
 <h1>
 <input name="name" type="text" value="{{item.name}}" placeholder="Item Name" />
 </h1>
 <div class="form-group inline-group">
 <label>Type</label>
 <input name="type" type="text" value="{{item.type}}" disabled />
 </div>
 {{!-- Upgrade button for weapons, armor, and equipment --}}
 {{#if (or (eq item.type "weapon") (eq item.type "armor") (eq item.type "equipment"))}}
 <div class="form-group">
 <button type="button" class="open-upgrade-app" style="margin-top: 10px;">
 <i class="fas fa-cog"></i> Manage Upgrades
 </button>
 </div>
 {{/if}}
 </div>
 </header>

 <!-- Tabs -->
 <nav class="sheet-tabs tabs" data-group="primary">
 <a class="item active" data-tab="data">Data</a>
 <a class="item" data-tab="desc">Description</a>
 </nav>

 <!-- Tab Contents -->
 <section class="sheet-body flexcol">

 <!-- Data Tab: show fields based on type -->
 <div class="tab active" data-tab="data">
 <!-- Weapons -->
 {{#if (eq item.type "weapon")}}
 <div class="form-group">
 <label>Weapon Category</label>
 <select name="system.weaponCategory">
 <option value="simple" {{#if (eq system.weaponCategory "simple")}}selected{{/if}}>Simple</option>
 <option value="advanced" {{#if (eq system.weaponCategory "advanced")}}selected{{/if}}>Advanced</option>
 <option value="melee-exotic" {{#if (eq system.weaponCategory "melee-exotic")}}selected{{/if}}>Melee Exotic</option>
 <option value="heavy" {{#if (eq system.weaponCategory "heavy")}}selected{{/if}}>Heavy</option>
 <option value="rifles" {{#if (eq system.weaponCategory "rifles")}}selected{{/if}}>Rifles</option>
 <option value="pistols" {{#if (eq system.weaponCategory "pistols")}}selected{{/if}}>Pistols</option>
 <option value="ranged-exotic" {{#if (eq system.weaponCategory "ranged-exotic")}}selected{{/if}}>Ranged Exotic</option>
 <option value="natural" {{#if (eq system.weaponCategory "natural")}}selected{{/if}}>Natural</option>
 </select>
 </div>
 <div class="form-group">
 <label>Melee or Ranged</label>
 <select name="system.meleeOrRanged">
 <option value="melee" {{#if (eq system.meleeOrRanged "melee")}}selected{{/if}}>Melee</option>
 <option value="ranged" {{#if (eq system.meleeOrRanged "ranged")}}selected{{/if}}>Ranged</option>
 </select>
 </div>
 <div class="form-group">
 <label>Damage</label>
 <div style="display: flex; gap: 8px; align-items: center;">
 <input name="system.damage" type="text" value="{{system.damage}}" style="flex: 1;" placeholder="e.g., 1d6" />
 <span>+</span>
 <select name="system.damageBonus" style="flex: 1;">
 <option value="" {{#if (eq system.damageBonus "")}}selected{{/if}}>(None)</option>
 <option value="str" {{#if (eq system.damageBonus "str")}}selected{{/if}}>STR</option>
 <option value="str2" {{#if (eq system.damageBonus "str2")}}selected{{/if}}>STR x2</option>
 <option value="dex" {{#if (eq system.damageBonus "dex")}}selected{{/if}}>DEX</option>
 <option value="dex2" {{#if (eq system.damageBonus "dex2")}}selected{{/if}}>DEX x2</option>
 </select>
 </div>
 </div>
 <div class="form-group">
 <label>Damage Type</label>
 <select name="system.damageType">
 <option value="energy" {{#if (eq system.damageType "energy")}}selected{{/if}}>Energy</option>
 <option value="kinetic" {{#if (eq system.damageType "kinetic")}}selected{{/if}}>Kinetic</option>
 <option value="ion" {{#if (eq system.damageType "ion")}}selected{{/if}}>Ion</option>
 </select>
 </div>
 <div class="form-group">
 <label>Attack Bonus</label>
 <input name="system.attackBonus" type="number" value="{{system.attackBonus}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Critical Range</label>
 <input name="system.criticalRange" type="text" value="{{system.criticalRange}}" placeholder="e.g., 20 or 19-20" />
 </div>
 <div class="form-group">
 <label>Critical Multiplier</label>
 <input name="system.criticalMultiplier" type="text" value="{{system.criticalMultiplier}}" placeholder="e.g., x2, x3" />
 </div>
 <div class="form-group">
 <label>Attack Attribute</label>
 <select name="system.attackAttribute">
 <option value="str" {{#if (eq system.attackAttribute "str")}}selected{{/if}}>Strength</option>
 <option value="dex" {{#if (eq system.attackAttribute "dex")}}selected{{/if}}>Dexterity</option>
 <option value="con" {{#if (eq system.attackAttribute "con")}}selected{{/if}}>Constitution</option>
 <option value="int" {{#if (eq system.attackAttribute "int")}}selected{{/if}}>Intelligence</option>
 <option value="wis" {{#if (eq system.attackAttribute "wis")}}selected{{/if}}>Wisdom</option>
 <option value="cha" {{#if (eq system.attackAttribute "cha")}}selected{{/if}}>Charisma</option>
 </select>
 </div>
 <div class="form-group">
 <label>Range</label>
 <input name="system.range" type="text" value="{{system.range}}" />
 </div>
 <div class="form-group">
 <label>Special Effects</label>
 <textarea name="system.specialEffects" rows="2">{{system.specialEffects}}</textarea>
 </div>
 <div class="form-group">
 <label for="item-properties">Properties (comma-separated)</label>
 <input id="item-properties" name="system.properties" type="text" value="{{#if system.properties}}{{join system.properties delimiter=', '}}{{/if}}" placeholder="e.g., Stun, Accurate, Autofire" aria-describedby="properties-help" />
 <small id="properties-help">Separate multiple properties with commas</small>
 </div>
 <div class="form-group">
 <label>Ammunition Type</label>
 <input name="system.ammunition.type" type="text" value="{{system.ammunition.type}}" placeholder="e.g., Power Pack, Slugs" />
 </div>
 <div class="form-group">
 <label>Ammo Current / Max</label>
 <div style="display: flex; gap: 8px;">
 <input name="system.ammunition.current" type="number" value="{{system.ammunition.current}}" data-dtype="Number" style="flex: 1;" />
 <span style="line-height: 30px;">/</span>
 <input name="system.ammunition.max" type="number" value="{{system.ammunition.max}}" data-dtype="Number" style="flex: 1;" />
 </div>
 </div>
 <div class="form-group">
 <label>Autofire</label>
 <input name="system.autofire" type="checkbox" {{#if system.autofire}}checked{{/if}} />
 </div>
 <div class="form-group">
 <label>Equipped</label>
 <input name="system.equipped" type="checkbox" {{#if system.equipped}}checked{{/if}} />
 </div>
 <div class="form-group">
 <label>Dual Wielded (Two-Weapon Fighting)</label>
 <input name="system.dualWielded" type="checkbox" {{#if system.dualWielded}}checked{{/if}} />
 </div>
 <div class="form-group">
 <label>Wielded Two-Handed</label>
 <input name="system.wieldedTwoHanded" type="checkbox" {{#if system.wieldedTwoHanded}}checked{{/if}} />
 </div>
 <div class="form-group">
 <label>Weight (kg)</label>
 <input name="system.weight" type="number" value="{{system.weight}}" step="0.1" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Cost (credits)</label>
 <input name="system.cost" type="number" value="{{system.cost}}" data-dtype="Number" />
 </div>
 {{/if}}

 <!-- Armor -->
 {{#if (eq item.type "armor")}}
 <div class="form-group">
 <label>Armor Type</label>
 <select name="system.armorType">
 <option value="light" {{#if (eq system.armorType "light")}}selected{{/if}}>Light</option>
 <option value="medium" {{#if (eq system.armorType "medium")}}selected{{/if}}>Medium</option>
 <option value="heavy" {{#if (eq system.armorType "heavy")}}selected{{/if}}>Heavy</option>
 </select>
 </div>
 <div class="form-group">
 <label>Defense Bonus</label>
 <input name="system.defenseBonus" type="number" value="{{system.defenseBonus}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Max Dex Bonus</label>
 <input name="system.maxDexBonus" type="number" value="{{system.maxDexBonus}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Armor Check Penalty</label>
 <input name="system.armorCheckPenalty" type="number" value="{{system.armorCheckPenalty}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Fortitude Bonus</label>
 <input name="system.fortBonus" type="number" value="{{system.fortBonus}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Speed Penalty (squares)</label>
 <input name="system.speedPenalty" type="number" value="{{system.speedPenalty}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Weight (kg)</label>
 <input name="system.weight" type="number" value="{{system.weight}}" step="0.1" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Cost (credits)</label>
 <input name="system.cost" type="number" value="{{system.cost}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Equipped</label>
 <input name="system.equipped" type="checkbox" {{#if system.equipped}}checked{{/if}} />
 </div>
 {{/if}}

 <!-- Equipment -->
 {{#if (eq item.type "equipment")}}
 <div class="form-group">
 <label>Weight</label>
 <input name="system.weight" type="text" value="{{system.weight}}" />
 </div>
 <div class="form-group">
 <label>Cost</label>
 <input name="system.cost" type="text" value="{{system.cost}}" />
 </div>
 {{/if}}

 <!-- Feats -->
 {{#if (eq item.type "feat")}}
 <div class="form-group">
 <label>Feat Type</label>
 <select name="system.featType">
 <option value="general" {{#if (eq system.featType "general")}}selected{{/if}}>General</option>
 <option value="force" {{#if (eq system.featType "force")}}selected{{/if}}>Force</option>
 <option value="species" {{#if (eq system.featType "species")}}selected{{/if}}>Species</option>
 </select>
 </div>
 <div class="form-group">
 <label>Prerequisite</label>
 <textarea name="system.prerequisite" rows="2">{{system.prerequisite}}</textarea>
 </div>
 <div class="form-group">
 <label>Benefit</label>
 <textarea name="system.benefit" rows="4">{{system.benefit}}</textarea>
 </div>
 <div class="form-group">
 <label>Normal</label>
 <textarea name="system.normalText" rows="2">{{system.normalText}}</textarea>
 </div>
 <div class="form-group">
 <label>Special</label>
 <textarea name="system.special" rows="2">{{system.special}}</textarea>
 </div>
 <div class="form-group">
 <label>Bonus Feat For (comma-separated)</label>
 <input name="system.bonusFeatFor" type="text" value="{{#if system.bonusFeatFor}}{{join system.bonusFeatFor delimiter=', '}}{{/if}}" placeholder="e.g., Soldier, Scout, Jedi" />
 <small>Classes that can take this as a bonus feat</small>
 </div>
 <div class="form-group">
 <label>Uses: Current / Max</label>
 <div style="display: flex; gap: 8px; align-items: center;">
 <input name="system.uses.current" type="number" value="{{system.uses.current}}" data-dtype="Number" style="flex: 1;" />
 <span>/</span>
 <input name="system.uses.max" type="number" value="{{system.uses.max}}" data-dtype="Number" style="flex: 1;" />
 <label style="margin: 0; white-space: nowrap;"><input name="system.uses.perDay" type="checkbox" {{#if system.uses.perDay}}checked{{/if}} /> Per Day</label>
 </div>
 </div>
 {{/if}}

 <!-- Talents -->
 {{#if (eq item.type "talent")}}
 <div class="form-group">
 <label>Talent Tree</label>
 <input name="system.tree" type="text" value="{{system.tree}}" />
 </div>
 <div class="form-group">
 <label>Prerequisite</label>
 <textarea name="system.prerequisite" rows="2">{{system.prerequisite}}</textarea>
 </div>
 <div class="form-group">
 <label>Benefit</label>
 <textarea name="system.benefit" rows="4">{{system.benefit}}</textarea>
 </div>
 <div class="form-group">
 <label>Special</label>
 <textarea name="system.special" rows="2">{{system.special}}</textarea>
 </div>
 <div class="form-group">
 <label>Uses: Current / Max</label>
 <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
 <input name="system.uses.current" type="number" value="{{system.uses.current}}" data-dtype="Number" style="flex: 1; min-width: 60px;" />
 <span>/</span>
 <input name="system.uses.max" type="number" value="{{system.uses.max}}" data-dtype="Number" style="flex: 1; min-width: 60px;" />
 <label style="margin: 0; white-space: nowrap;"><input name="system.uses.perEncounter" type="checkbox" {{#if system.uses.perEncounter}}checked{{/if}} /> Per Encounter</label>
 <label style="margin: 0; white-space: nowrap;"><input name="system.uses.perDay" type="checkbox" {{#if system.uses.perDay}}checked{{/if}} /> Per Day</label>
 </div>
 </div>
 {{/if}}

 <!-- Force Powers -->
 {{#if (or (eq item.type "forcepower") (eq item.type "force-power"))}}
 <div class="form-group">
 <label>Power Level</label>
 <input name="system.powerLevel" type="number" value="{{system.powerLevel}}" min="1" max="6" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Discipline</label>
 <select name="system.discipline">
 <option value="telekinetic" {{#if (eq system.discipline "telekinetic")}}selected{{/if}}>Telekinetic</option>
 <option value="telepathic" {{#if (eq system.discipline "telepathic")}}selected{{/if}}>Telepathic</option>
 <option value="vital" {{#if (eq system.discipline "vital")}}selected{{/if}}>Vital</option>
 <option value="dark-side" {{#if (eq system.discipline "dark-side")}}selected{{/if}}>Dark Side</option>
 <option value="light-side" {{#if (eq system.discipline "light-side")}}selected{{/if}}>Light Side</option>
 </select>
 </div>
 <div class="form-group">
 <label>Use the Force DC</label>
 <input name="system.useTheForce" type="number" value="{{system.useTheForce}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Activation Time</label>
 <input name="system.time" type="text" value="{{system.time}}" />
 </div>
 <div class="form-group">
 <label>Range</label>
 <input name="system.range" type="text" value="{{system.range}}" />
 </div>
 <div class="form-group">
 <label>Target</label>
 <input name="system.target" type="text" value="{{system.target}}" />
 </div>
 <div class="form-group">
 <label>Duration</label>
 <input name="system.duration" type="text" value="{{system.duration}}" />
 </div>
 <div class="form-group">
 <label>Maintainable</label>
 <input name="system.maintainable" type="checkbox" {{#if system.maintainable}}checked{{/if}} />
 </div>
 <div class="form-group">
 <label>Effect</label>
 <textarea name="system.effect" rows="4">{{system.effect}}</textarea>
 </div>
 <div class="form-group">
 <label>Special</label>
 <textarea name="system.special" rows="2">{{system.special}}</textarea>
 </div>
 <div class="form-group">
 <label>Force Point Cost</label>
 <input name="system.forcePointCost" type="number" value="{{system.forcePointCost}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Force Point Enhancement</label>
 <textarea name="system.forcePointEffect" rows="3">{{system.forcePointEffect}}</textarea>
 </div>
 <div class="form-group">
 <label>Tags/Descriptors (comma-separated)</label>
 <input name="system.tags" type="text" value="{{#if system.tags}}{{join system.tags delimiter=', '}}{{/if}}" placeholder="e.g., dark-side, mind-affecting, telekinetic" />
 <small>Separate multiple tags with commas</small>
 </div>
 <div class="form-group">
 <label>Sourcebook</label>
 <input name="system.sourcebook" type="text" value="{{system.sourcebook}}" />
 </div>
 <div class="form-group">
 <label>Page</label>
 <input name="system.page" type="number" value="{{system.page}}" data-dtype="Number" />
 </div>
 {{/if}}

 <!-- Classes -->
 {{#if (eq item.type "class")}}
 <div class="form-group">
 <label>Hit Die</label>
 <input name="system.hitDie" type="text" value="{{system.hitDie}}" />
 </div>
 <div class="form-group">
 <label>Skill Points</label>
 <input name="system.skillPoints" type="number" value="{{system.skillPoints}}" data-dtype="Number" />
 </div>
 <div class="form-group">
 <label>Features</label>
 <textarea name="system.features">{{system.features}}</textarea>
 </div>
 {{/if}}
 </div>

 <!-- Description Tab -->
 <div class="tab" data-tab="desc">
 <h2>Description</h2>
 <div class="form-group">
 <textarea name="system.description">{{system.description}}</textarea>
 </div>
 </div>
 </section>
</form>
<h1>{{labels.sheetTitle}}</h1>

</div><!-- swse-sheet -->