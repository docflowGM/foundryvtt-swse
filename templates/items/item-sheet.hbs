{{!-- SWSE Item Sheet - Roll20 Inspired Design --}}
{{!-- File: templates/items/item-sheet.hbs --}}

<form class="swse item-sheet {{cssClass}} holo-theme" autocomplete="off">
    {{!-- Holographic Frame Header --}}
    <div class="holo-frame-top">
        <img class="sw-logo" src="systems/swse/assets/assets/ui/logo.png" alt="Star Wars Saga Edition"/>
    </div>

    {{!-- Header Section --}}
    <header class="sheet-header">
        <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" height="80" width="80"/>
        
        <div class="header-fields">
            <h1 class="charname">
                <input name="name" type="text" value="{{item.name}}" placeholder="Item Name"/>
            </h1>
            
            <div class="header-row">
                <div class="resource">
                    <label class="resource-label">Type</label>
                    <input type="text" name="type" value="{{item.type}}" disabled style="background: #e0e0e0;"/>
                </div>
                
                {{#if (or (eq item.type "eqassets/uipment") (eq item.type "weapon") (eq item.type "armor"))}}
                <div class="resource">
                    <label class="resource-label">Cost (Credits)</label>
                    <input type="number" name="system.cost" value="{{system.cost}}" data-dtype="Number"/>
                </div>
                
                <div class="resource">
                    <label class="resource-label">Weight (kg)</label>
                    <input type="number" name="system.weight" value="{{system.weight}}" data-dtype="Number"/>
                </div>
                {{/if}}
            </div>
        </div>
    </header>

    {{!-- Main Tabs --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item active" data-tab="description">Description</a>
        <a class="item" data-tab="details">Details</a>
        {{#if (or (eq item.type "feat") (eq item.type "talent") (eq item.type "forcepower"))}}
        <a class="item" data-tab="reqassets/uirements">Reqassets/uirements</a>
        {{/if}}
    </nav>

    <section class="sheet-body">
        {{!-- Description Tab --}}
        <div class="tab description active" data-group="primary" data-tab="description">
            <h3 class="section-header">Description</h3>
            {{editor system.description target="system.description" button=true owner=owner editable=editable}}
        </div>

        {{!-- Details Tab --}}
        <div class="tab details" data-group="primary" data-tab="details">
            {{!-- WEAPON DETAILS --}}
            {{#if (eq item.type "weapon")}}
            <h3 class="section-header">Weapon Statistics</h3>
            <div class="item-stats-grid">
                <div class="stat-field">
                    <label>Damage</label>
                    <input type="text" name="system.damage" value="{{system.damage}}" placeholder="e.g., 3d8"/>
                </div>
                
                <div class="stat-field">
                    <label>Damage Type</label>
                    <select name="system.damageType">
                        <option value="energy" {{#if (eq system.damageType "energy")}}selected{{/if}}>Energy</option>
                        <option value="kinetic" {{#if (eq system.damageType "kinetic")}}selected{{/if}}>Kinetic</option>
                        <option value="ion" {{#if (eq system.damageType "ion")}}selected{{/if}}>Ion</option>
                    </select>
                </div>
                
                <div class="stat-field">
                    <label>Range</label>
                    <input type="text" name="system.range" value="{{system.range}}" placeholder="e.g., 6 squares"/>
                </div>
                
                <div class="stat-field">
                    <label>Critical</label>
                    <input type="text" name="system.crit" value="{{system.crit}}" placeholder="e.g., 20"/>
                </div>
                
                <div class="stat-field">
                    <label>Attack Bonus</label>
                    <input type="number" name="system.attackBonus" value="{{system.attackBonus}}" data-dtype="Number"/>
                </div>
                
                <div class="stat-field">
                    <label>Weapon Category</label>
                    <select name="system.category">
                        <option value="simple" {{#if (eq system.category "simple")}}selected{{/if}}>Simple</option>
                        <option value="pistols" {{#if (eq system.category "pistols")}}selected{{/if}}>Pistols</option>
                        <option value="rifles" {{#if (eq system.category "rifles")}}selected{{/if}}>Rifles</option>
                        <option value="heavy" {{#if (eq system.category "heavy")}}selected{{/if}}>Heavy Weapons</option>
                        <option value="lightsaber" {{#if (eq system.category "lightsaber")}}selected{{/if}}>Lightsabers</option>
                        <option value="exotic" {{#if (eq system.category "exotic")}}selected{{/if}}>Exotic</option>
                    </select>
                </div>
            </div>
            
            <h3 class="section-header">Special Properties</h3>
            <textarea name="system.special" rows="4">{{system.special}}</textarea>
            {{/if}}

            {{!-- ARMOR DETAILS --}}
            {{#if (eq item.type "armor")}}
            <h3 class="section-header">Armor Statistics</h3>
            <div class="item-stats-grid">
                <div class="stat-field">
                    <label>Reflex Defense Bonus</label>
                    <input type="number" name="system.defenseBonus" value="{{system.defenseBonus}}" data-dtype="Number"/>
                </div>
                
                <div class="stat-field">
                    <label>Max Dex Bonus</label>
                    <input type="number" name="system.maxDex" value="{{system.maxDex}}" data-dtype="Number" placeholder="Leave blank for unlimited"/>
                </div>
                
                <div class="stat-field">
                    <label>Max Speed (squares)</label>
                    <input type="number" name="system.maxSpeed" value="{{system.maxSpeed}}" data-dtype="Number" placeholder="Leave blank for no penalty"/>
                </div>
                
                <div class="stat-field">
                    <label>Armor Check Penalty</label>
                    <input type="number" name="system.armorCheck" value="{{system.armorCheck}}" data-dtype="Number"/>
                </div>
                
                <div class="stat-field full-width">
                    <label>Armor Type</label>
                    <select name="system.armorType">
                        <option value="light" {{#if (eq system.armorType "light")}}selected{{/if}}>Light Armor</option>
                        <option value="medium" {{#if (eq system.armorType "medium")}}selected{{/if}}>Medium Armor</option>
                        <option value="heavy" {{#if (eq system.armorType "heavy")}}selected{{/if}}>Heavy Armor</option>
                    </select>
                </div>
            </div>
            
            <div class="stat-field">
                <label><input type="checkbox" name="system.eqassets/uipped" {{checked system.eqassets/uipped}}/> Currently Eqassets/uipped</label>
            </div>
            {{/if}}

            {{!-- FEAT DETAILS --}}
            {{#if (eq item.type "feat")}}
            <h3 class="section-header">Feat Type</h3>
            <div class="item-stats-grid">
                <div class="stat-field">
                    <label>Category</label>
                    <select name="system.category">
                        <option value="general" {{#if (eq system.category "general")}}selected{{/if}}>General</option>
                        <option value="combat" {{#if (eq system.category "combat")}}selected{{/if}}>Combat</option>
                        <option value="force" {{#if (eq system.category "force")}}selected{{/if}}>Force</option>
                        <option value="skill" {{#if (eq system.category "skill")}}selected{{/if}}>Skill</option>
                    </select>
                </div>
            </div>
            
            <h3 class="section-header">Benefit</h3>
            {{editor system.benefit target="system.benefit" button=true owner=owner editable=editable}}
            
            <h3 class="section-header">Normal</h3>
            <textarea name="system.normal" rows="3">{{system.normal}}</textarea>
            
            <h3 class="section-header">Special</h3>
            <textarea name="system.special" rows="3">{{system.special}}</textarea>
            {{/if}}

            {{!-- TALENT DETAILS --}}
            {{#if (eq item.type "talent")}}
            <h3 class="section-header">Talent Tree</h3>
            <div class="stat-field">
                <label>Talent Tree Name</label>
                <input type="text" name="system.talentTree" value="{{system.talentTree}}" placeholder="e.g., Jedi Hunter"/>
            </div>
            
            <h3 class="section-header">Benefit</h3>
            {{editor system.benefit target="system.benefit" button=true owner=owner editable=editable}}
            {{/if}}

            {{!-- FORCE POWER DETAILS --}}
            {{#if (eq item.type "forcepower")}}
            <h3 class="section-header">Force Power Statistics</h3>
            <div class="item-stats-grid">
                <div class="stat-field">
                    <label>Force Points Reqassets/uired</label>
                    <input type="number" name="system.forcePoints" value="{{system.forcePoints}}" data-dtype="Number"/>
                </div>
                
                <div class="stat-field">
                    <label>Uses per Encounter</label>
                    <div style="display: flex; gap: 5px;">
                        <input type="number" name="system.uses.current" value="{{system.uses.current}}" data-dtype="Number" style="width: 60px;"/>
                        <span>/</span>
                        <input type="number" name="system.uses.max" value="{{system.uses.max}}" data-dtype="Number" style="width: 60px;"/>
                    </div>
                </div>
                
                <div class="stat-field">
                    <label>Range</label>
                    <input type="text" name="system.range" value="{{system.range}}" placeholder="e.g., 6 squares"/>
                </div>
                
                <div class="stat-field">
                    <label>Duration</label>
                    <input type="text" name="system.duration" value="{{system.duration}}" placeholder="e.g., Instantaneous"/>
                </div>
            </div>
            
            <div class="forcepower-options">
                <label><input type="checkbox" name="system.darkSide" {{checked system.darkSide}}/> Dark Side Power</label>
                <label><input type="checkbox" name="system.lightSide" {{checked system.lightSide}}/> Light Side Power</label>
            </div>
            
            <h3 class="section-header">Effect</h3>
            {{editor system.effect target="system.effect" button=true owner=owner editable=editable}}
            {{/if}}

            {{!-- CLASS DETAILS --}}
            {{#if (eq item.type "class")}}
            <h3 class="section-header">Class Statistics</h3>
            <div class="item-stats-grid">
                <div class="stat-field">
                    <label>Hit Die</label>
                    <input type="text" name="system.hitDie" value="{{system.hitDie}}" placeholder="e.g., 1d8"/>
                </div>
                
                <div class="stat-field">
                    <label>Skill Points per Level</label>
                    <input type="number" name="system.skillPoints" value="{{system.skillPoints}}" data-dtype="Number"/>
                </div>
                
                <div class="stat-field">
                    <label>Starting Feats</label>
                    <input type="number" name="system.startingFeats" value="{{system.startingFeats}}" data-dtype="Number"/>
                </div>
                
                <div class="stat-field">
                    <label>Class Level</label>
                    <input type="number" name="system.level" value="{{system.level}}" data-dtype="Number" min="1"/>
                </div>
            </div>
            
            <h3 class="section-header">Class Features</h3>
            {{editor system.features target="system.features" button=true owner=owner editable=editable}}
            {{/if}}

            {{!-- EQUIPMENT DETAILS --}}
            {{#if (eq item.type "eqassets/uipment")}}
            <h3 class="section-header">Eqassets/uipment Details</h3>
            <div class="item-stats-grid">
                <div class="stat-field">
                    <label>Quantity</label>
                    <input type="number" name="system.quantity" value="{{system.quantity}}" data-dtype="Number"/>
                </div>
                
                <div class="stat-field">
                    <label>Availability</label>
                    <select name="system.availability">
                        <option value="common" {{#if (eq system.availability "common")}}selected{{/if}}>Common</option>
                        <option value="military" {{#if (eq system.availability "military")}}selected{{/if}}>Military</option>
                        <option value="restricted" {{#if (eq system.availability "restricted")}}selected{{/if}}>Restricted</option>
                        <option value="illegal" {{#if (eq system.availability "illegal")}}selected{{/if}}>Illegal</option>
                        <option value="rare" {{#if (eq system.availability "rare")}}selected{{/if}}>Rare</option>
                    </select>
                </div>
            </div>
            
            <h3 class="section-header">Notes</h3>
            <textarea name="system.notes" rows="5">{{system.notes}}</textarea>
            {{/if}}
        </div>

        {{!-- Reqassets/uirements Tab --}}
        {{#if (or (eq item.type "feat") (eq item.type "talent") (eq item.type "forcepower"))}}
        <div class="tab reqassets/uirements" data-group="primary" data-tab="reqassets/uirements">
            <h3 class="section-header">Prereqassets/uisites</h3>
            
            <div class="prereqassets/uisites-grid">
                <div class="prereq-field">
                    <label>Minimum Level</label>
                    <input type="number" name="system.prereqassets/uisites.level" value="{{system.prereqassets/uisites.level}}" data-dtype="Number" placeholder="None"/>
                </div>
                
                <div class="prereq-field">
                    <label>Reqassets/uired Class</label>
                    <input type="text" name="system.prereqassets/uisites.class" value="{{system.prereqassets/uisites.class}}" placeholder="None"/>
                </div>
                
                <div class="prereq-field">
                    <label>Minimum BAB</label>
                    <input type="number" name="system.prereqassets/uisites.bab" value="{{system.prereqassets/uisites.bab}}" data-dtype="Number" placeholder="None"/>
                </div>
                
                <div class="prereq-field">
                    <label>Reqassets/uired Feat</label>
                    <input type="text" name="system.prereqassets/uisites.feat" value="{{system.prereqassets/uisites.feat}}" placeholder="None"/>
                </div>
                
                <div class="prereq-field full-width">
                    <label>Reqassets/uired Ability Score</label>
                    <input type="text" name="system.prereqassets/uisites.ability" value="{{system.prereqassets/uisites.ability}}" placeholder="e.g., Dex 13"/>
                </div>
                
                <div class="prereq-field full-width">
                    <label>Other Reqassets/uirements</label>
                    <textarea name="system.prereqassets/uisites.other" rows="3">{{system.prereqassets/uisites.other}}</textarea>
                </div>
            </div>
        </div>
        {{/if}}
    </section>
</form>
