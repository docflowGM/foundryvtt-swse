{{!-- ====================================================================== --}}
{{!-- SWSE Feat Actions Panel â€” Holo Card System                             --}}
{{!-- Dynamically powered by FeatActionsMapper                               --}}
{{!-- ====================================================================== --}}

<div class="swse-feat-actions-container">

  {{#if featActions.all.length}}

    {{#each featActions.all as |feat|}}
      <div class="feat-card {{feat.type}} {{#if feat.toggled}}toggled{{/if}}">

        <div class="feat-card-header" data-expand="{{feat.key}}">
          <div class="feat-icon">
            <i class="{{#if feat.toggleable}}fas fa-toggle-on{{else if feat.variable}}{{getIconClass 'slidersH'}}{{else}}{{getIconClass 'fist'}}{{/if}}"></i>
          </div>
          <div class="feat-title">{{feat.name}}</div>
          <div class="feat-type-label">{{feat.typeLabel}}</div>
          <div class="feat-expand-icon"><i class="{{getIconClass 'chevronDown'}}"></i></div>
        </div>

        <div class="feat-card-body" id="feat-body-{{feat.key}}">

            <div class="feat-benefit">{{feat.description}}</div>

            {{#if feat.notes}}
            <div class="feat-notes">
              <i class="{{getIconClass 'info'}}"></i> {{feat.notes}}
            </div>
            {{/if}}

            {{!-- Toggleable actions --}}
            {{#if feat.toggleable}}
              <button class="feat-btn feat-toggle {{#if feat.toggled}}active{{/if}}"
                      data-action="toggleFeatAction"
                      data-key="{{feat.key}}">
                <i class="fas {{#if feat.toggled}}fa-toggle-on{{else}}fa-toggle-off{{/if}}"></i>
                {{#if feat.toggled}}Active{{else}}Inactive{{/if}}
              </button>
            {{/if}}

            {{!-- Variable actions (like Power Attack) --}}
            {{#if feat.variable}}
              <div class="feat-variable-control">
                <label>{{feat.name}} Value:</label>
                <input type="range"
                       class="feat-variable-slider"
                       data-action="updateFeatVariable"
                       data-key="{{feat.key}}"
                       min="{{feat.variableOptions.min}}"
                       max="{{feat.variableOptions.max}}"
                       step="{{feat.variableOptions.step}}"
                       value="{{feat.variableValue}}" />
                <span class="variable-value">{{feat.variableValue}}</span>
              </div>
            {{/if}}

            {{!-- Source info --}}
            {{#if feat.source}}
            <div class="feat-source">
              <i class="{{getIconClass 'PLACEHOLDER_'}}"></i> Source: {{feat.source}}
            </div>
            {{/if}}

            {{!-- Related skills --}}
            {{#if feat.relatedSkills.length}}
            <div class="feat-tags">
              {{#each feat.relatedSkills}}
                <span class="feat-tag">{{this}}</span>
              {{/each}}
            </div>
            {{/if}}

        </div>
      </div>
    {{/each}}

  {{else}}

    <p class="feat-actions-empty">
      <i class="{{getIconClass 'PLACEHOLDER_'}}"></i>
      No feat actions available. Gain feats to unlock special combat abilities!
    </p>

  {{/if}}

</div>
