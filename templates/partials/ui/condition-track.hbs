<div class="condition-track">
  <label class="track-label">Condition</label>

  <div class="track-visual flexrow">

    {{!-- Normal (no checkmark) --}}
    <div class="track-condition normal {{#if (eq system.conditionTrack.current 0)}}active{{/if}}"
         data-step="0"
         role="button"
         tabindex="0"
         title="Normal">
      <div class="condition-name">Normal</div>
    </div>

    {{!-- Step 1: -1 penalty --}}
    <div class="track-condition level-1 {{#if (gte system.conditionTrack.current 1)}}active{{/if}}"
         data-step="1"
         role="button"
         tabindex="0"
         title="-1 to all d20 rolls">
      {{#if (gte system.conditionTrack.current 1)}}
      <div class="checkmark">✓</div>
      {{else}}
      <div class="checkbox-empty"></div>
      {{/if}}
      <div class="condition-penalty">-1</div>
    </div>

    {{!-- Step 2: -2 penalty --}}
    <div class="track-condition level-2 {{#if (gte system.conditionTrack.current 2)}}active{{/if}}"
         data-step="2"
         role="button"
         tabindex="0"
         title="-2 to all d20 rolls">
      {{#if (gte system.conditionTrack.current 2)}}
      <div class="checkmark">✓</div>
      {{else}}
      <div class="checkbox-empty"></div>
      {{/if}}
      <div class="condition-penalty">-2</div>
    </div>

    {{!-- Step 3: -5 penalty --}}
    <div class="track-condition level-3 {{#if (gte system.conditionTrack.current 3)}}active{{/if}}"
         data-step="3"
         role="button"
         tabindex="0"
         title="-5 to all d20 rolls">
      {{#if (gte system.conditionTrack.current 3)}}
      <div class="checkmark">✓</div>
      {{else}}
      <div class="checkbox-empty"></div>
      {{/if}}
      <div class="condition-penalty">-5</div>
    </div>

    {{!-- Step 4: -10 penalty --}}
    <div class="track-condition level-4 {{#if (gte system.conditionTrack.current 4)}}active{{/if}}"
         data-step="4"
         role="button"
         tabindex="0"
         title="-10 to all d20 rolls, half speed">
      {{#if (gte system.conditionTrack.current 4)}}
      <div class="checkmark">✓</div>
      {{else}}
      <div class="checkbox-empty"></div>
      {{/if}}
      <div class="condition-penalty">-10</div>
    </div>

    {{!-- Step 5: Helpless --}}
    <div class="track-condition level-5 helpless {{#if (gte system.conditionTrack.current 5)}}active{{/if}}"
         data-step="5"
         role="button"
         tabindex="0"
         title="Helpless (unconscious or disabled)">
      {{#if (gte system.conditionTrack.current 5)}}
      <div class="checkmark">✓</div>
      {{else}}
      <div class="checkbox-empty"></div>
      {{/if}}
      <div class="condition-penalty">Helpless</div>
    </div>

  </div>

  <div class="track-controls flexrow">

    {{!-- Improve Condition Button --}}
    <button class="track-button improve"
            type="button"
            role="button"
            tabindex="0"
            aria-label="Recover one step"
            title="Recover one step">
      <i class="fas fa-arrow-up" aria-hidden="true"></i>
      Recover
    </button>

    {{!-- Persistent Checkbox --}}
    <label class="persistent-checkbox"
           title="Prevents recovery"
           aria-label="Persistent condition">
      <input type="checkbox"
             name="system.conditionTrack.persistent"
             {{checked system.conditionTrack.persistent}}/>
      <span>Persistent</span>
    </label>

    {{!-- Worsen Condition Button --}}
    <button class="track-button worsen"
            type="button"
            role="button"
            tabindex="0"
            aria-label="Worsen one step"
            title="Worsen one step">
      <i class="fas fa-arrow-down" aria-hidden="true"></i>
      Damage
    </button>
  </div>

  {{#if (gt system.conditionTrack.penalty 0)}}
  <div class="penalty-warning">
    <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
    <span>{{system.conditionTrack.penalty}} penalty to all d20 rolls</span>
  </div>
  {{/if}}
</div>
